(self.webpackChunk=self.webpackChunk||[]).push([[661],{6796:(e,t,o)=>{"use strict";o.d(t,{Z:()=>i}),o(3238),o(895);const i={methods:{makeFullUrl:function(e){var t=new Url(this.$store.state.urlOrigin+e);return t.query.ipRedirectOverride=!0,t.query.overrideBaseCountry=!0,t.toString()},makeUrl:function(e,t){var o=this.$store.state.urlOrigin,i="";switch(e){case"store":case"book":i=o+"/pd/"+t;break;case"author":t.url&&(i=o+"/author/"+t.url);break;case"narrator":t.name&&(i=o+"/search?searchNarrator="+decodeURIComponent(t.name));break;case"series":t.asin&&(i=o+"/series/"+t.asin);break;case"publisher":t.name&&(i=o+"/search?searchProvider="+decodeURIComponent(t.name));break;case"categories":t.name&&(i=o+"/cat/"+t.url)}if(i){var s=new Url(i);return s.query.ipRedirectOverride=!0,s.query.overrideBaseCountry=!0,s.toString()}return""}}}},6084:(e,t,o)=>{"use strict";o.d(t,{Z:()=>i}),o(266);const i={mixins:[o(3223).Z],methods:{progressbarWidth:function(e){if(e.progress){if("finished"===e.progress.toLowerCase().trim())return{width:"100%"};if(e.length){var t=this.timeStringToSeconds(e.progress),o=this.timeStringToSeconds(e.length);return{width:(t=o-t)/o*100+"%"}}return{width:0}}return{width:0}}}}},6623:(e,t,o)=>{"use strict";o.d(t,{Z:()=>i}),o(2410),o(3238),o(895);const i={methods:{secondsToTimeString:function(e,t){var o=function(e,o){return t?e:("000"+e).slice(-1*o)},i=parseFloat(e).toFixed(3),s=Math.floor(i/60/60),r=Math.floor(i/60)%60,a=(Math.floor(i-60*r),i.slice(-3),(s.toString().length>1?s:o(s,2))+(t?"h ":".")),n=o(r,2)+(t?"m ":"");return t&&!s&&(a=""),a+n}}}},2410:(e,t,o)=>{"use strict";var i=o(1695),s=o(8759),r=o(6526),a=o(7740),n=o(4005),l=o(4088),c=o(9720),u=o(211),h=o(9955),d=o(3002),g=h("slice"),p=d("slice",{ACCESSORS:!0,0:0,1:2}),m=u("species"),f=[].slice,b=Math.max;i({target:"Array",proto:!0,forced:!g||!p},{slice:function(e,t){var o,i,u,h=l(this),d=n(h.length),g=a(e,d),p=a(void 0===t?d:t,d);if(r(h)&&("function"!=typeof(o=h.constructor)||o!==Array&&!r(o.prototype)?s(o)&&null===(o=o[m])&&(o=void 0):o=void 0,o===Array||void 0===o))return f.call(h,g,p);for(i=new(void 0===o?Array:o)(b(p-g,0)),u=0;g<p;g++,u++)g in h&&c(i,u,h[g]);return i.length=u,i}})},738:(e,t,o)=>{"use strict";o.r(t),o.d(t,{default:()=>C}),o(911),o(266);var i=o(3223),s=o(6623),r=o(6084),a=o(6495),n=(o(3238),o(1418),o(6796));const l={name:"carousel",props:["books","width"],mixins:[n.Z,a.Z],components:{splide:function(){return o.e(301).then(o.bind(o,7067)).then((function(e){return e.Splide}))},"splide-slide":function(){return o.e(301).then(o.bind(o,7067)).then((function(e){return e.SplideSlide}))}},data:function(){return{loaded:!1,options:{type:"loop",rewind:!0,width:null,trimSpace:!1,gap:"4px",lazyLoad:"nearby",preloadPages:1,perPage:5},coverSize:127}},mounted:function(){this.$nextTick((function(){var e=window.innerWidth,t=e<="716";this.options.width=t?e:this.$el.offsetWidth;var o=t?e-84:this.$el.offsetWidth-84;e<="500"&&(this.coverSize=102),e<="415"&&(this.coverSize=72),this.options.perPage=Math.floor(o/this.coverSize),this.loaded=!0}))},methods:{sliderTippyContent:function(e){return'<div style="font-weight: normal; text-align: left; padding: 10px; font-size: 13px; line-height: 17px">'+(e.title?'<div><h3 style="font-size: 1.2em; font-weight: bold; margin: 0 0 3px 0;">'+e.title+"</h3>":"")+(e.subHeading?'<div><h2 style="font-size: 1.1em; font-weight: normal; margin: 0 0 3px 0;">'+e.subHeading+"</h2>":"")+(e.authors?"<div><strong>Authors: </strong>"+e.authors+"</div>":"")+(e.narrators?"<div><strong>Authors: </strong>"+e.narrators+"</div>":"")+(e.length?"<div><strong>Length: </strong>"+e.length+"</div>":"")+"</div>"}}};var c=o(810);const u=(0,c.Z)(l,(function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("div",{staticClass:"ale-carousel"},[o("h3",{staticClass:"ale-heading"},[e._t("default")],2),e._v(" "),e.loaded?o("splide",{ref:"splide",attrs:{options:e.options}},e._l(e.books,(function(t,i){return o("splide-slide",{key:i,staticClass:"ale-carousel-item"},[o("a",{directives:[{name:"tippy",rawName:"v-tippy"}],attrs:{href:e.makeUrl("book",t.asin),target:"_blank",content:e.sliderTippyContent(t)}},[o("img",{staticClass:"cover",attrs:{"data-splide-lazy":e.makeCoverUrl(t.cover,150),alt:""}})])])})),1):e._e()],1)}),[],!1,null,null,null).exports;o(2327),o(1013),o(1203);const h={name:"booksInSeries",props:["book"],data:function(){return{inSeries:!1,series:{collection:null,toggle:!1}}},created:function(){this.series.collection=this.getBooksInSeries(),this.series.count=this.getSeriesCount();var e=this;_.each(this.series.collection,(function(t){if(t.books.length)return e.inSeries=!0,!1}))},methods:{goToBookInSeries:function(e,t){t?"series"!==this.$route.name?this.$router.push({name:"series",params:{series:e.asin},query:{book:t.asin}}):this.$root.$emit("book-clicked",{book:t}):e&&("series"!==this.$route.name?this.$router.push({name:"series",params:{series:e.asin}}):(this.$root.$emit("book-clicked",{book:null}),scroll({top:0})))},getBookNumber:function(e,t){var o=_.find(e.series,{asin:t}).bookNumbers;return o?o.join(","):""},getBooksInSeries:function(){var e=this,t=[];return e.book.series&&_.each(e.book.series,(function(o,i){var s=_.find(e.$store.state.library.series,{asin:o.asin});s&&t.push({asin:o.asin,name:o.name,length:s.length,books:_.map(s.books,(function(t){return _.find(e.$store.state.library.books,{asin:t})}))})})),t.length>0?t:null},getSeriesCount:function(){var e=[];return _.each(this.series.collection,(function(t){e.push(t.books.length)})),e.join(", ")},booksInSeriesLabelClick:function(){var e=this;this.series.toggle=!this.series.toggle,this.$nextTick((function(){e.$root.$emit("resizeSummary")}))},numbersClass:function(e){var t=e.progress;return{finished:!(!t||!t.toLowerCase().match("finished")),reading:!(!t||t.toLowerCase().match("finished")),unfinished:!e.progress,current:this.book.asin===e.asin}},iconTippyContent:function(e){var t=this.numbersClass(e),o="";return t.finished?o="Finished!":t.unfinished?o="Not started...":t.reading&&(o="Started..."),o},booksInSeriesIcon:function(e){var t=this.numbersClass(e),o="";return t.finished?o="archive":t.unfinished?o="book":t.reading&&(o="book-reader"),o}}},d=(0,c.Z)(h,(function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("div",[e.inSeries?o("div",{staticClass:"label hidden-section-label my-books-in-series-label",on:{click:e.booksInSeriesLabelClick}},[o("span",{staticClass:"heading"},[e._v("My books in the series")]),e._v(" "),o("span",{staticClass:"count"},[e._v(e._s(e.series.count))]),e._v(" "),o("font-awesome",{attrs:{fas:"",icon:e.series.toggle?"chevron-up":"chevron-down"}})],1):e._e(),e._v(" "),e.series.toggle?o("div",{staticClass:"hidden-section my-books-in-series"},e._l(e.series.collection,(function(t,i){return o("div",{key:t.asin,staticClass:"series-section"},[o("div",{directives:[{name:"tippy",rawName:"v-tippy",value:{placement:"right",flipBehavior:["right","top","bottom"],maxWidth:300,allowHTML:!0},expression:"{ placement: 'right', flipBehavior: ['right', 'top', 'bottom'], maxWidth: 300, allowHTML: true }"}],staticClass:"series-heading",attrs:{content:"<div style='text-align: left;'>The total number of books is based on every single listing in the series page, including different versions or bundles with books you may already have.</div>"}},[o("div",{staticClass:"series-name"},[o("a",{attrs:{href:"#"},on:{click:function(o){return o.preventDefault(),e.goToBookInSeries(t)}}},[e._v("\n            "+e._s(t.name)+"\n          ")])]),e._v(" "),o("div",{staticClass:"series-length"},[e._v("\n          "+e._s(t.books.length)+" / "+e._s(t.length)+"\n        ")])]),e._v(" "),e._l(t.books,(function(i,s){return o("div",{key:i.asin,staticClass:"numbers-list-item",class:e.numbersClass(i),attrs:{"data-series-name":t.name}},[o("span",{directives:[{name:"tippy",rawName:"v-tippy",value:{placement:"left",flipBehavior:["left","top","bottom"]},expression:"{ placement: 'left', flipBehavior: ['left', 'top', 'bottom'] }"}],staticClass:"icon",attrs:{content:e.iconTippyContent(i)}},[o("font-awesome",{attrs:{fas:"",icon:e.booksInSeriesIcon(i)}})],1),e._v(" "),o("a",{attrs:{href:"#"},on:{click:function(o){return o.preventDefault(),e.goToBookInSeries(t,i)}}},[o("span",{staticClass:"numbers"},[e._v(e._s(e.getBookNumber(i,t.asin)))]),e._v(" "),o("span",{staticClass:"title"},[e._v(e._s(i.title))])])])}))],2)})),0):e._e()])}),[],!1,null,"fa0c7fba",null).exports,g={name:"arrayToHTML",data:function(){return{inputDataExists:null}},props:["label","array","delim"],mixins:[n.Z],created:function(){this.inputDataExists=this.checkIfArrayHasData()},computed:{identifierClass:function(){return"details-"+_.kebabCase(this.label)}},methods:{checkIfArrayHasData:function(){return this.array&&!_.isEmpty(this.array)}}},p=(0,c.Z)(g,(function(){var e=this,t=e.$createElement,o=e._self._c||t;return e.inputDataExists?o("div",{class:e.identifierClass},[o("strong",{staticClass:"strong-label"},[e._v(e._s(e.label)+":")]),e._v(" "),e._l(e.array,(function(t,i){return o("span",{key:t.name+"("+i+")"},[o("span",[0!==i?o("span",[e._v(e._s(e.delim||", "))]):e._e(),e._v(" "),o("a",{attrs:{href:e.makeUrl(e.label.toLowerCase(),t),target:"_blank"}},[e._v(e._s(t.name))]),t.bookNumbers?o("span",{staticClass:"book-number"},[e._v("\n        (book\n        "),e._l(t.bookNumbers,(function(t,i){return o("span",[0!==i?o("span",[e._v(e._s(","))]):e._e(),o("span",[e._v(e._s(t))])])})),e._v(")")],2):e._e()])])}))],2):e._e()}),[],!1,null,null,null).exports,m={name:"bookSummary",props:["book","detailsEl"],mixins:[n.Z],components:{arrayToHTML:p},data:function(){return{summary:{readmore:{toggle:!1,exists:!1},maxHeight:null,maxHeightTemp:null}}},computed:{summaryHTML:function(){return this.book.summary||this.book.blurb}},mounted:function(){this.$nextTick((function(){this.getSummaryMaxHeight()}))},created:function(){this.$root.$on("afterWindowResize",this.getSummaryMaxHeight),this.$root.$on("resizeSummary",this.getSummaryMaxHeight)},beforeDestroy:function(){this.$root.$off("afterWindowResize",this.getSummaryMaxHeight),this.$root.$off("resizeSummary",this.getSummaryMaxHeight)},methods:{getSummaryMaxHeight:function(){window.innerWidth<=688?this.summaryHTML&&(this.summary.maxHeight=this.$refs.summaryMetaTop.offsetHeight+260+"px",this.summary.maxHeightTemp=this.summary.maxHeight):this.$nextTick((function(){var e=this.detailsEl.querySelector(".information").offsetHeight,t=this.$refs.summary.offsetHeight>e;this.summary.maxHeight=t?e+"px":null,this.summary.maxHeightTemp=e+"px"}))},summaryReadMoreclick:function(){var e=this.$refs.readMoreBtn.getBoundingClientRect().top;this.summary.readmore.toggle=!this.summary.readmore.toggle,this.summary.maxHeight=this.summary.readmore.toggle?"none":this.summary.maxHeightTemp,this.summary.readmore.toggle||this.$nextTick((function(){scroll({top:this.$refs.readMoreBtn.getBoundingClientRect().top+window.pageYOffset-e})}))}}},f=(0,c.Z)(m,(function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("div",{ref:"summaryWrapper",staticClass:"book-summary-wrapper",class:{expanded:e.summary.readmore.toggle},style:{maxHeight:e.summary.maxHeight,paddingBottom:e.summary.readmore.toggle?"40px":"0px"}},[o("div",{ref:"summary",staticClass:"book-summary"},[o("div",{ref:"summaryMetaTop",staticClass:"summary-meta-top"},[o("h2",{staticClass:"book-title"},[o("a",{attrs:{href:e.makeUrl("book",e.book.asin),target:"_blank",rel:"noopener nofollow noreferrer"}},[e._v("\n          "+e._s(e.book.title)+"\n        ")])]),e._v(" "),e.book.categories?o("div",{staticClass:"categories"},[e.book.categories?o("arrayToHTML",{attrs:{label:"Categories",array:e.book.categories,delim:" > "}}):e._e()],1):e._e(),e._v(" "),o("div",{staticClass:"inline-children smoll-text"},[e.book.releaseDate?o("div",{staticClass:"release-date"},[o("span",{staticClass:"strong-label"},[e._v("Released:")]),e._v(" "),o("span",[e._v(e._s(e.book.releaseDate))])]):e._e(),e._v(" "),e.book.storePageChanged?o("div",{directives:[{name:"tippy",rawName:"v-tippy",value:{maxWidth:300},expression:"{ maxWidth: 300 }"}],staticClass:"store-page-changed",attrs:{content:"There is a store page for the book, but it's for a different version of the book. <br><br>This is the reason why ome data is unavailable."}},[o("font-awesome",{attrs:{icon:["fas","shopping-bag"]}}),e._v("\n          changed\n        ")],1):e.book.storePageMissing?o("div",{directives:[{name:"tippy",rawName:"v-tippy",value:{maxWidth:300},expression:"{ maxWidth: 300 }"}],staticClass:"store-page-missing",attrs:{content:"Store page was either removed or it became unavailable in your region since the purchase. In some cases there may still be a store page for a different version of the book. <br><br>This is the reason why ome data is unavailable."}},[o("font-awesome",{attrs:{icon:["fas","shopping-bag"]}}),e._v("\n          missing\n        ")],1):e._e()])]),e._v(" "),e.summaryHTML?o("div",{staticClass:"summary-inner-wrap",domProps:{innerHTML:e._s(e.summaryHTML)}}):e._e()]),e._v(" "),e.summary.maxHeight?o("div",{ref:"readMoreBtn",staticClass:"summary-read-more",on:{click:e.summaryReadMoreclick}},[o("span",[e._v(e._s(e.summary.readmore.toggle?"Read less":"Read more"))]),e._v(" "),o("font-awesome",{attrs:{fas:"",icon:e.summary.readmore.toggle?"chevron-up":"chevron-down"}})],1):e._e()])}),[],!1,null,"627ac3fc",null).exports,b={name:"goodReadsLink",props:["book","icon","topRight","size"],mixins:[{methods:{makeGoodReadsUrl:function(){var e=_.find(this.book.isbns,{type:"ISBN_10"});e&&(e=e.identifier);var t=_.find(this.book.isbns,{type:"ISBN_13"});t&&(t=t.identifier);var o=this.book.authors?this.book.authors[0].name+" "+(this.book.titleShort||this.book.title):"";return"https://www.goodreads.com/search?q="+encodeURIComponent(o)}}}],data:function(){return{goodreadsUrl:null}},created:function(){this.book&&(this.goodreadsUrl=this.makeGoodReadsUrl())}},k=(0,c.Z)(b,(function(){var e=this,t=e.$createElement,o=e._self._c||t;return e.goodreadsUrl?o("a",{class:{"top-right":e.topRight},attrs:{href:e.goodreadsUrl,target:"_blank"}},[e.icon?o("div",{directives:[{name:"tippy",rawName:"v-tippy"}],staticClass:"gr-icon",style:{width:(e.size||30)+"px",height:(e.size||30)+"px"},attrs:{content:"Search for the book in Goodreads"}},[o("img",{attrs:{src:"data:image/svg+xml;base64,PHN2ZyBoZWlnaHQ9IjUxMiIgdmlld0JveD0iMCAwIDI0IDI0IiB3aWR0aD0iNTEyIiB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciPjxwYXRoIGQ9Ik01LjExMSAxOC45MDdoLjEyOWMuNTg1IDAgMS4xNzYgMCAxLjc2Mi4wMDUuMDc0IDAgLjE0My0uMDE5LjE2Ni4wOTguMzI4IDEuNjM2IDEuMzgzIDIuNTU5IDIuOSAyLjk5NSAxLjI0MS4zNTYgMi40OTUuMzY2IDMuNzQ5LjA4NCAxLjU1OC0uMzQ3IDIuNTgyLTEuMzI3IDMuMTM2LTIuODMxLjM2OS0xLjAwOC40OTQtMi4wNTMuNTA4LTMuMTE3LjAwNS0uMjcyLjAxNC0yLjIwMy0uMDA5LTIuNDc1bC0uMDQxLS4wMTRjLS4wMzcuMDctLjA3OS4xMzYtLjExNS4yMDYtMS4wMTkgMi4wMi0yLjgyNiAzLjE1OS00Ljg2MSAzLjIzOS00Ljc1LjE4OC03LjgxMi0yLjY3Mi03LjkzMi04LjI1OS0uMDIzLTEuMTExLjA4My0yLjE5OC4zODMtMy4yNjcuOTUtMy4zMzMgMy40NC01LjU0MSA3LjA5Ny01LjU2OSAyLjgyNi0uMDE5IDQuNjgxIDEuODE0IDUuMzU5IDMuMjk1LjAyMy4wNTIuMDYuMTA4LjExLjA4OVYuNDk4aDIuMDQzYzAgMTMuMTM5LjAwNSAxNS41NzIuMDA1IDE1LjU3Mi0uMDA1IDMuNjgtMS4yMzIgNi43MzYtNC43NSA3LjYwMy0zLjIwNS43OTItNy4zMzIuMjI1LTkuMDM5LTIuNjgxLS4zNjktLjYzMy0uNTQ0LTEuMzI3LS41OTktMi4wODZ6bTYuNzQ3LTE3LjE5NEM5LjQzNyAxLjY5IDYuODU0IDMuNjIxIDYuNTU0IDcuOTg1Yy0uMTg5IDIuNzY2LjY4MyA1LjcyOCAzLjI5OCA2Ljk2NiAxLjI3My42MDUgMy40MjcuNzAzIDQuOTk1LS40MDggMi4xOTUtMS41NTYgMi44OTEtNC41NDcgMi41MjctNy4yMTktLjQ0OC0zLjMzMy0yLjIwNS01LjYyNS01LjUxNi01LjYxMXoiIGZpbGw9IiM0ZTM0MmUiLz48L3N2Zz4=",alt:""}})]):o("span",[e._v("Search in Goodreads")])]):e._e()}),[],!1,null,"66a19166",null).exports;o(7471),o(2482);const v={name:"starRating",props:["size","rating","stars","ratings","number","numberOf","block","image","placeholderImage","placeholderOpacity","noPlaceholder"],data:function(){return{opt:null,config:{rating:null,length:null}}},created:function(){this.opt={rating:5,stars:5,size:15,number:!1,numberOf:!1,block:!1,image:!1,placeholderImage:!1,placeholderOpacity:!1,noPlaceholder:!1};var e=this.splitDecimals(this.rating);this.config.rating=this.toPercentage(e);var t=this.noPlaceholder||this.opt.noPlacehoder;this.config.length=t?this.config.rating.whole+(this.config.rating.fraction?1:0):parseInt(this.stars||this.opt.stars,10)},methods:{splitDecimals:function(e){var t,o=""+e;return o.indexOf(".")>-1?t=o.split("."):o.indexOf(",")>-1&&(t=o.split(",")),t?{whole:t[0],fraction:"."+t[1]}:{whole:e,fraction:null}},toPercentage:function(e){var t={whole:parseInt(e.whole,10)};return e.fraction&&(t.originalFraction=e.fraction),e.fraction&&(t.fraction=Math.floor(100*parseFloat(e.fraction,10))),t}}},y={name:"aleBookBasicInfo",props:["book","goodreads"],components:{goodReadsLink:k,arrayToHTML:p,starRating:(0,c.Z)(v,(function(){var e=this,t=e.$createElement,o=e._self._c||t;return e.config.rating?o("div",{staticClass:"sRatings-wrapper",class:{"sRatings-block":e.block||e.opt.block},attrs:{"data-rating":e.rating||0}},[e._l(e.config.length,(function(t,i){return o("div",{key:i,style:{width:e.config.rating.whole===t-1&&(e.noPlaceholder||e.opt.noPlaceholder)&&e.config.rating.fraction?(e.size||e.opt.size)*e.config.rating.originalFraction+"px":(e.size||e.opt.size)+"px",height:(e.size||e.opt.size)+"px"},attrs:{"data-star":t,"data-whole":e.config.rating.whole===t,"data-fraction":e.config.rating.fraction&&e.config.rating.whole===t-1}},[e.config.rating.whole<=t&&!e.noPlaceholder&&!e.opt.noPlaceholder?o("div",{staticClass:"sRatings-placeholder",class:{"sRatings-show":e.config.rating.whole<t},style:{left:e.config.rating.fraction&&e.config.rating.whole===t-1?e.config.rating.fraction+"%":"0%","background-size":(e.size||e.opt.size)+"px","background-image":!!(e.image||e.placeholderImage||e.opt.placeholderImage)&&"url("+(e.image&&!e.placeholderImage?e.image:e.placeholderImage||e.opt.placeholderImage)+")",opacity:e.placeholderOpacity||e.opt.placeholderOpacity}}):e._e(),e._v(" "),e.config.rating.whole>=t||e.config.rating.fraction&&e.config.rating.whole===t-1?o("div",{staticClass:"sRatings-star",style:{width:e.config.rating.whole>=t||e.config.rating.whole===t-1&&(e.noPlaceholder||e.opt.noPlaceholder)?"100%":e.config.rating.fraction+"%","background-size":(e.size||e.opt.size)+"px","background-image":!(!e.image&&!e.opt.image)&&"url("+(e.image||e.opt.image)+")"}}):e._e()])})),e._v(" "),e.number||e.opt.number?o("div",{staticClass:"text-label",style:{width:!(!e.numberOf&&!e.opt.numberOf)&&"auto",padding:!(!e.numberOf&&!e.opt.numberOf)&&"0 6px"}},[e._v(e._s(e.numberOf||e.opt.numberOf?e.rating+"/"+(e.stars||e.opt.stars):e.rating))]):e._e(),e._v(" "),e.ratings?o("div",{staticClass:"rating-count"},[e._v("("+e._s(e.ratings)+" ratings)")]):e._e()],2):e._e()}),[],!1,null,"c8c094a8",null).exports},methods:{myRatingLabel:function(e){switch(parseFloat(e)){case 1:return"Not for me";case 2:return"It’s okay";case 3:return"Pretty good";case 4:return"It’s great";case 5:return"I love it"}}}},M=(0,c.Z)(y,(function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("div",{staticClass:"basic-info"},[e.book.authors?o("arrayToHTML",{attrs:{label:"Author",array:e.book.authors}}):e._e(),e._v(" "),e.book.narrators?o("arrayToHTML",{attrs:{label:"Narrator",array:e.book.narrators}}):e._e(),e._v(" "),e.book.series?o("arrayToHTML",{attrs:{label:"Series",array:e.book.series}}):e._e(),e._v(" "),e.book.publishers?o("arrayToHTML",{attrs:{label:"Publisher",array:e.book.publishers}}):e._e(),e._v(" "),e.book.length?o("div",[o("strong",{staticClass:"strong-label"},[e._v("Length:")]),e._v("\n    "+e._s(e.book.length)+"\n  ")]):e._e(),e._v(" "),o("div",{staticClass:"line-it-up"},[e.book.rating?o("div",{staticClass:"rating"},[o("strong",{staticClass:"strong-label"},[e._v("Rating:")]),e._v(" "),o("star-rating",{attrs:{size:12,rating:e.book.rating,number:"true",ratings:e.book.ratings}})],1):e._e(),e._v(" "),e.book.myRating?o("div",{staticClass:"own-rating"},[o("strong",{staticClass:"strong-label"},[e._v("My rating: ")]),e._v(" "),o("star-rating",{directives:[{name:"tippy",rawName:"v-tippy",value:{placement:"right",flipBehavior:["right","top","bottom"]},expression:"{ placement: 'right', flipBehavior: ['right', 'top', 'bottom']  }"}],attrs:{size:12,content:e.myRatingLabel(e.book.myRating),rating:e.book.myRating,number:"true"}})],1):e._e()])],1)}),[],!1,null,"b1312e84",null).exports,w=(0,c.Z)({name:"favoriteBook",props:["topRight","size"]},(function(){var e=this,t=e.$createElement;return(e._self._c||t)("font-awesome",{directives:[{name:"tippy",rawName:"v-tippy"}],staticClass:"favorite",class:{"top-right":e.topRight},style:{width:(e.size||30)+"px",height:"auto"},attrs:{fas:"",icon:"heart",content:"This book is one of my favorites!"}})}),[],!1,null,"cf36e8ec",null).exports;var x=o(8546);const I=(0,c.Z)({name:"openInApp",props:["book","icon","topRight","size"],data:function(){return{url:null}},created:function(){this.book&&(this.url="https://smart.link/o3waqx4wg1gdn?asin="+this.book.asin)}},(function(){var e=this,t=e.$createElement,o=e._self._c||t;return e.url?o("a",{class:{"top-right":e.topRight},attrs:{href:e.url,target:"_blank"}},[e.icon?o("div",{directives:[{name:"tippy",rawName:"v-tippy"}],staticClass:"gr-icon audible-app-link",style:{width:(e.size||30)+"px",height:(e.size||30)+"px"},attrs:{content:"Open in app"}},[o("img",{attrs:{src:"data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCAxNTEuNSA5My43IiB3aWR0aD0iMTUxLjUiIGhlaWdodD0iOTMuNyI+PGRlZnM+PHN0eWxlPi5jbHMtMXtmaWxsOiNmZmY7fTwvc3R5bGU+PC9kZWZzPjxnPjxnPjxwYXRoIGNsYXNzPSJjbHMtMSIgZD0iTTc1LjggODAuN2w3NS43LTQ3LjJ2MTIuOEw3NS44IDkzLjcgMCA0Ni4zVjMzLjVsNzUuOCA0Ny4yeiIvPjxwYXRoIGNsYXNzPSJjbHMtMSIgZD0iTTc1LjggMjEuNWE0OC4xNyA0OC4xNyAwIDAgMC00MC43IDIxLjkgMTIuOTQgMTIuOTQgMCAwIDEgMS44LTEuNmMyMS4zLTE3LjcgNTItMTMuNyA2OC43IDguNmwxMS4xLTcuMWE0OS44MiA0OS44MiAwIDAgMC00MC45LTIxLjgiLz48cGF0aCBjbGFzcz0iY2xzLTEiIGQ9Ik03NS44IDQzLjRhMjcuNzIgMjcuNzIgMCAwIDAtMjIuNCAxMS41IDIyLjcgMjIuNyAwIDAgMSAxMy41LTQuNGM4LjIgMCAxNS41IDQuMiAyMC40IDExLjNsMTAuNi02LjZhMjUuNzkgMjUuNzkgMCAwIDAtMjIuMS0xMS44TTI0LjYgMjQuMkM1NS44LS40IDk5LjkgNi4zIDEyMy40IDM5bC4yLjIgMTEuNS03LjFhNzAuODIgNzAuODIgMCAwIDAtMTE4LjYgMCA2MC42MyA2MC42MyAwIDAgMSA4LjEtNy45Ii8+PC9nPjwvZz48L3N2Zz4=",alt:""}})]):o("span",[e._v("Search in Goodreads")])]):e._e()}),[],!1,null,"33eaab15",null).exports,T=(0,c.Z)({name:"openWebPlayer",props:["book","icon","topRight","size"],data:function(){return{url:null}},created:function(){this.book&&(this.url="https://www.audible.com/webplayer?asin="+this.book.asin)}},(function(){var e=this,t=e.$createElement,o=e._self._c||t;return e.url?o("a",{class:{"top-right":e.topRight},attrs:{href:e.url,target:"_blank"}},[e.icon?o("div",{directives:[{name:"tippy",rawName:"v-tippy"}],staticClass:"gr-icon audible-app-link",style:{width:(e.size||30)+"px",height:(e.size||30)+"px"},attrs:{content:"Open web player"}},[o("img",{attrs:{src:"data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCAxNTEuNSA5My43IiB3aWR0aD0iMTUxLjUiIGhlaWdodD0iOTMuNyI+PGRlZnM+PHN0eWxlPi5jbHMtMXtmaWxsOiNmZmY7fTwvc3R5bGU+PC9kZWZzPjxnPjxnPjxwYXRoIGNsYXNzPSJjbHMtMSIgZD0iTTc1LjggODAuN2w3NS43LTQ3LjJ2MTIuOEw3NS44IDkzLjcgMCA0Ni4zVjMzLjVsNzUuOCA0Ny4yeiIvPjxwYXRoIGNsYXNzPSJjbHMtMSIgZD0iTTc1LjggMjEuNWE0OC4xNyA0OC4xNyAwIDAgMC00MC43IDIxLjkgMTIuOTQgMTIuOTQgMCAwIDEgMS44LTEuNmMyMS4zLTE3LjcgNTItMTMuNyA2OC43IDguNmwxMS4xLTcuMWE0OS44MiA0OS44MiAwIDAgMC00MC45LTIxLjgiLz48cGF0aCBjbGFzcz0iY2xzLTEiIGQ9Ik03NS44IDQzLjRhMjcuNzIgMjcuNzIgMCAwIDAtMjIuNCAxMS41IDIyLjcgMjIuNyAwIDAgMSAxMy41LTQuNGM4LjIgMCAxNS41IDQuMiAyMC40IDExLjNsMTAuNi02LjZhMjUuNzkgMjUuNzkgMCAwIDAtMjIuMS0xMS44TTI0LjYgMjQuMkM1NS44LS40IDk5LjkgNi4zIDEyMy40IDM5bC4yLjIgMTEuNS03LjFhNzAuODIgNzAuODIgMCAwIDAtMTE4LjYgMCA2MC42MyA2MC42MyAwIDAgMSA4LjEtNy45Ii8+PC9nPjwvZz48L3N2Zz4=",alt:""}})]):o("span",[e._v("Search in Goodreads")])]):e._e()}),[],!1,null,"a5b93062",null).exports,L={name:"book-info-toolbar",props:["book"],components:{goodReadsLink:k,favoriteBook:w,sampleButton:x.Z,openInApp:I,openWebPlayer:T},data:function(){return{size:20}}},S={name:"bookDetails",components:{bookBasicInfo:M,bookInfoToolbar:(0,c.Z)(L,(function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("div",{staticClass:"book-info-toolbar"},[e.book.favorite?o("favorite-book",{attrs:{size:e.size,book:e.book}}):e._e(),e._v(" "),o("sampleButton",{attrs:{size:e.size,book:e.book}}),e._v(" "),o("good-reads-link",{attrs:{size:e.size,book:e.book,icon:!0}}),e._v(" "),o("open-in-app",{attrs:{size:e.size,book:e.book,icon:!0}}),e._v(" "),o("open-web-player",{attrs:{size:e.size,book:e.book,icon:!0}})],1)}),[],!1,null,null,null).exports,carousel:u,booksInSeries:d,arrayToHTML:p,bookSummary:f},mixins:[i.Z,s.Z,r.Z,a.Z,n.Z],props:["book","index","booksWrapper"],data:function(){return{maxWidth:"unset",scrollTop:0,loading:!0,clickedBook:null}},created:function(){this.resetScroll(),this.clickedBook=document.querySelector('.ale-book[data-asin="'+this.book.asin+'"]')||document.querySelector('.ale-row[data-asin="'+this.book.asin+'"]'),this.scrollTop=window.pageYOffset,this.$root.$on("afterWindowResize",this.onWindowResize)},mounted:function(){this.maxWidth=this.repositionBookDetails()+"px",this.$updateQuery({query:"book",value:this.book.asin}),this.loading=!1},beforeDestroy:function(){this.$root.$off("afterWindowResize",this.onWindowResize)},computed:{getMaxWidth:function(){return"spreadsheet"===this.$store.state.sticky.viewMode||window.innerWidth>800?this.maxWidth:"800px"}},methods:{onWindowResize:function(e){this.maxWidth=this.repositionBookDetails()+"px",e.widthChanged&&this.resetScroll()},changeUrl:function(){_.get(this.$route,"query.book")!==this.book.asin&&this.$router.replace({query:{book:this.book.asin}})},resetScroll:function(){this.$nextTick((function(){var e=document.querySelector("#ale-navigation").offsetHeight;"grid"===this.$store.state.sticky.viewMode?scroll({top:this.clickedBook.offsetTop-e-25}):document.querySelector(".list-view-inner-wrap").scroll({top:this.clickedBook.offsetTop-e-25})}))},repositionBookDetails:function(){var e=document.querySelector(".ale-books"),t=e.querySelector(".ale-book")?e.querySelectorAll(".ale-book"):e.querySelector("table tbody").querySelectorAll(".ale-row"),o={};o.el=t[this.index],o.index=this.index,o.width=o.el.offsetWidth,o.siblings=t;var i={};i.el=e,i.width=i.el.offsetWidth;var s={};s.cols=Math.floor(i.width/o.width)||1,console.log("%c"+s.cols,"background: #003191; color: #fff; padding: 2px 5px; border-radius: 8px;",i.width,o.width),s.cols<2?s.rowEndEl=o.el:(s.currentRow=Math.floor(o.index/s.cols)+1,s.rowEnd=s.currentRow*s.cols,s.getRowEndEl=function(e){var t=o.siblings[e];return t||(t=s.getRowEndEl(--e)),t},s.rowEndEl=s.getRowEndEl(s.rowEnd-1));var r=document.querySelector(".target-row-end");return r&&r.classList.remove("target-row-end"),s.rowEndEl.classList.add("target-row-end"),s.rowEndEl.parentNode.insertBefore(this.$refs.bookDetails,s.rowEndEl.nextSibling),"spreadsheet"!==this.$store.state.sticky.viewMode&&this.repositionBookDetailsArrow(o.el),"spreadsheet"===this.$store.state.sticky.viewMode?i.width-60:o.width*s.cols},repositionBookDetailsArrow:function(e){var t=e.getBoundingClientRect().left+window.scrollX+e.offsetWidth/2;this.$refs.arrow.style.left=t+"px"},openAdjacentBookDetails:function(e){var t=this;if("grid"===this.$store.state.sticky.viewMode)switch(e.srcKey){case"left":case"tabShift":this.$root.$emit("book-clicked",{book:this.$store.getters.collection[this.index-1]});break;case"right":case"tab":this.$root.$emit("book-clicked",{book:this.$store.getters.collection[this.index+1]});break;case"up":case"down":var o={};o.el=document.querySelector(".ale-books"),o.width=o.el.offsetWidth;var i={};i.el=this.clickedBook,i.index=this.index,i.width=i.el.offsetWidth;var s=Math.floor(o.width/i.width);this.$root.$emit("book-clicked",{book:"up"===e.srcKey?t.$store.getters.collection[this.index-s]:function e(o){var i=t.$store.getters.collection[o];return i||(i=e(--o)),i}(this.index+s)})}else switch(e.srcKey){case"left":case"up":case"tabShift":this.$root.$emit("book-clicked",{book:this.$store.getters.collection[this.index-1]});break;case"right":case"down":case"tab":this.$root.$emit("book-clicked",{book:this.$store.getters.collection[this.index+1]})}},closeBookDetails:function(){this.$emit("update:book",null),void 0!==this.$route.query&&this.$router.replace({query:{book:void 0}})},progressTooltip:function(e){if("finished"===e.progress.toLowerCase().trim()){var t=this.timeStringToSeconds(e.length);return"Finished: ( "+this.secondsToTimeString(t)+" )"}var o=this.timeStringToSeconds(e.progress),i=this.timeStringToSeconds(e.length),s=i-o;return"Progress: "+this.secondsToTimeString(s)+" / "+this.secondsToTimeString(i)},progressInfo:function(e){if(e.progress&&e.length){if("finished"===e.progress.toLowerCase().trim()){var t=this.timeStringToSeconds(e.length);return'<div class="stretch-center" style="flex: 1;"><strong>Finished!</strong> ( '+this.secondsToTimeString(t,!0)+" )</div>"}var o=this.timeStringToSeconds(e.progress),i=this.timeStringToSeconds(e.length),s=i-o;return"<strong>Progress: </strong><div>"+this.secondsToTimeString(s,!0)+" / "+this.secondsToTimeString(i,!0)+"</div>"}return"<div>Length: "+e.length+"</div>"}}},C=(0,c.Z)(S,(function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("div",{directives:[{name:"shortkey",rawName:"v-shortkey.once",value:["esc"],expression:"['esc']",modifiers:{once:!0}}],ref:"bookDetails",class:{"spreadsheet-details":"spreadsheet"===e.$store.state.sticky.viewMode},attrs:{id:"ale-bookdetails"},on:{shortkey:function(t){return e.closeBookDetails()}}},["spreadsheet"!==e.$store.state.sticky.viewMode?o("div",{ref:"arrow",staticClass:"arrow"}):e._e(),e._v(" "),o("div",{directives:[{name:"shortkey",rawName:"v-shortkey.once",value:{left:["arrowleft"],up:["arrowup"],right:["arrowright"],down:["arrowdown"],tab:["tab"],tabShift:["tab","shift"]},expression:"{ left: ['arrowleft'], up: ['arrowup'], right: ['arrowright'], down: ['arrowdown'], tab: ['tab'], tabShift: ['tab', 'shift'] }",modifiers:{once:!0}}],attrs:{id:"book-info-container"},on:{shortkey:e.openAdjacentBookDetails}},[o("div",{staticClass:"inner-wrap",style:{maxWidth:e.getMaxWidth}},[o("font-awesome",{directives:[{name:"tippy",rawName:"v-tippy",value:{placement:"left",flipBehavior:["left","right"],allowHTML:!0},expression:"{ placement: 'left', flipBehavior: ['left', 'right'], allowHTML: true }"}],staticClass:"book-details-info",attrs:{icon:["fas","info-circle"],content:"<div style='text-align: left;'><h3 style='margin: 0; padding-top: 10px; padding-left: 15px;'>Shortcuts</h3><ul><li><strong>Close:</strong> Esc</li><li><strong>Previous book:</strong> shift+tab, left arrow, up arrow (spreadsheet)</li><li><strong>Next book:</strong> tab, right arrow, down arrow (spreadsheet)</li><li><strong>Previous row:</strong> up arrow (Grid view)</li><li><strong>Next row:</strong> down arrow (Grid view)</li></ul></div>"}}),e._v(" "),o("div",{staticClass:"top"},[o("div",{ref:"information",staticClass:"information"},[o("div",{staticClass:"cover-wrap"},[o("a",{attrs:{href:e.makeUrl("book",e.book.asin),target:"_blank"}},[o("div",{staticClass:"progressbar"},[o("div",{staticClass:"progress",style:e.progressbarWidth(e.book)})]),e._v(" "),e.book.cover&&e.$store.state.windowWidth>688?o("img",{staticClass:"cover",attrs:{src:e.makeCoverUrl(e.book.cover)}}):e._e()])]),e._v(" "),o("div",{staticClass:"progress-info",domProps:{innerHTML:e._s(e.progressInfo(e.book))}}),e._v(" "),o("div",{staticClass:"basic-details"},[o("book-info-toolbar",{attrs:{book:e.book}}),e._v(" "),o("book-basic-info",{attrs:{book:e.book}})],1),e._v(" "),o("books-in-series",{attrs:{book:e.book}})],1),e._v(" "),o("book-summary",{attrs:{detailsEl:e.$el,book:e.book}})],1),e._v(" "),!e.loading&&e.book.peopleAlsoBought?o("carousel",{key:this.maxWidth,attrs:{books:e.book.peopleAlsoBought}},[e._v("\n        Listeners also enjoyed\n      ")]):e._e(),e._v(" "),!e.loading&&e.book.moreLikeThis?o("carousel",{key:this.maxWidth,attrs:{books:e.book.moreLikeThis}},[e._v("\n        More listens like this\n      ")]):e._e()],1)])])}),[],!1,null,"aa45c26a",null).exports},8546:(e,t,o)=>{"use strict";o.d(t,{Z:()=>i});const i=(0,o(810).Z)({name:"sampleButton",props:["book","index","topRight","size"],methods:{playSample:function(e,t){this.$root.$emit("play-audio",{from:"sampleButton",route:this.$route,book:e,index:t})}}},(function(){var e=this,t=e.$createElement;return(e._self._c||t)("font-awesome",{directives:[{name:"tippy",rawName:"v-tippy"}],staticClass:"pointer",class:{"top-right":e.topRight},style:{width:(e.size||30)+"px",height:"auto"},attrs:{fas:"",icon:"play-circle",content:"Play sample audio"},on:{click:function(t){return e.playSample(e.book,e.rowIndex)}}})}),[],!1,null,"ee87bac2",null).exports}}]);