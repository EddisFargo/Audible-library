(self.webpackChunk=self.webpackChunk||[]).push([["book-Details"],{65:(t,e,o)=>{"use strict";o.d(e,{Z:()=>i});const i={methods:{makeGoodReadsUrl:function(t){var e=((t=t||this.book).authors?t.authors[0].name+" - ":t.obj&&t.obj.authors?t.obj.authors[0].name+" - ":"")+(t.titleShort||t.title||"");return t.titleShort||t.title?"https://www.goodreads.com/search?q="+encodeURIComponent(e):null}}}},1405:(t,e,o)=>{"use strict";o.d(e,{Z:()=>i}),o(3238),o(895);const i={methods:{makeFullUrl:function(t){var e=new Url(this.$store.state.urlOrigin+t);return e.query.ipRedirectOverride=!0,e.query.overrideBaseCountry=!0,e.toString()},makeUrl:function(t,e){var o=this.$store.state.urlOrigin,i="";switch(t){case"store":case"book":i=o+"/pd/"+encodeURIComponent(e);break;case"author":i=e.url?o+"/author/"+e.url:o+"/search?searchAuthor="+encodeURIComponent(e.name);break;case"narrator":e.name&&(i=o+"/search?searchNarrator="+encodeURIComponent(e.name));break;case"series":e.asin&&(i=o+"/series/"+e.asin);break;case"publisher":e.name&&(i=o+"/search?searchProvider="+encodeURIComponent(e.name));break;case"categories":case"tags":e.url&&(i=o+"/cat/"+e.url)}if(i){var s=new Url(i);return s.query.ipRedirectOverride=!0,s.query.overrideBaseCountry=!0,s.toString()}return""}}}},4737:(t,e,o)=>{"use strict";o.d(e,{Z:()=>i}),o(266);const i={mixins:[o(5619).Z],methods:{progressbarWidth:function(t){if(t.progress){if("finished"===t.progress.toLowerCase().trim())return{width:"100%"};if(t.length){var e=this.timeStringToSeconds(t.progress),o=this.timeStringToSeconds(t.length);return{width:(e=o-e)/o*100+"%"}}return{width:0}}return{width:0}}}}},2863:(t,e,o)=>{"use strict";o.d(e,{Z:()=>i}),o(2410),o(3512),o(3238),o(895);const i={methods:{secondsToTimeString:function(t,e){var o=function(t,o){return e?t:("000"+t).slice(-1*o)},i=parseFloat(t).toFixed(3),s=Math.floor(i/60/60),a=Math.floor(i/60)%60,r=(Math.floor(i-60*a),i.slice(-3),(s.toString().length>1?s:o(s,2))+(e?"h ":".")),n=o(a,2)+(e?"m ":"");return e&&!s&&(r=""),r+n}}}},2194:(t,e,o)=>{var i=o(2086),s=o(3677),a=o(4059),r=o(4080).trim,n=o(9439),l=i.parseInt,c=i.Symbol,u=c&&c.iterator,h=/^[+-]?0x/i,g=8!==l(n+"08")||22!==l(n+"0x16")||u&&!s((function(){l(Object(u))}));t.exports=g?function(t,e){var o=r(a(t));return l(o,e>>>0||(h.test(o)?16:10))}:l},2081:(t,e,o)=>{var i=o(1695),s=o(2194);i({global:!0,forced:parseInt!=s},{parseInt:s})},2673:(t,e,o)=>{"use strict";o.r(e),o.d(e,{default:()=>E}),o(2077),o(911),o(266);var i=o(5619),s=o(2863),a=o(4737),r=o(3657),n=(o(5769),o(3238),o(1418),o(7460),o(4078),o(1405));const l={name:"carousel",props:["books","width"],mixins:[n.Z,r.Z],components:{splide:function(){return o.e("splide").then(o.bind(o,7067)).then((function(t){return t.Splide}))},"splide-slide":function(){return o.e("splide").then(o.bind(o,7067)).then((function(t){return t.SplideSlide}))}},data:function(){return{loaded:!1,options:{type:"loop",rewind:!0,width:null,trimSpace:!1,gap:"4px",lazyLoad:"nearby",preloadPages:1,perPage:5},coverSize:127}},mounted:function(){this.$nextTick((function(){var t=window.innerWidth,e=t<="716";this.options.width=e?t:this.$el.offsetWidth;var o=e?t-84:this.$el.offsetWidth-84;t<="500"&&(this.coverSize=102),t<="415"&&(this.coverSize=72),this.options.perPage=Math.floor(o/this.coverSize),this.loaded=!0}))},methods:{sliderTippyContent:function(t){return'<div style="font-weight: normal; text-align: left; padding: 10px; font-size: 13px; line-height: 17px">'+(t.title?'<div><h3 style="font-size: 1.2em; font-weight: bold; margin: 0 0 3px 0;">'+t.title+"</h3>":"")+(t.subHeading?'<div><h2 style="font-size: 1.1em; font-weight: normal; margin: 0 0 3px 0;">'+t.subHeading+"</h2>":"")+(t.authors?"<div><strong>Authors: </strong>"+t.authors+"</div>":"")+(t.narrators?"<div><strong>Narrators: </strong>"+t.narrators+"</div>":"")+(t.length?"<div><strong>Length: </strong>"+t.length+"</div>":"")+"</div>"}}};var c=o(810);const u=(0,c.Z)(l,(function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("div",{staticClass:"ale-carousel"},[o("h3",{staticClass:"ale-heading"},[t._t("default")],2),t._v(" "),t.loaded?o("splide",{ref:"splide",attrs:{options:t.options}},t._l(t.books,(function(e,i){return o("splide-slide",{key:i,staticClass:"ale-carousel-item"},[o("a",{directives:[{name:"tippy",rawName:"v-tippy"}],attrs:{href:t.makeUrl("book",e.asin),target:"_blank",rel:"noopener noreferrer",content:t.sliderTippyContent(e)}},[o("img",{staticClass:"cover",attrs:{crossorigin:"anonymous","data-splide-lazy":t.makeCoverUrl(e.cover,150),alt:""}})])])})),1):t._e()],1)}),[],!1,null,null,null).exports;o(8010),o(1203),o(2327),o(1013),o(5623),o(1514);const h={name:"openInApp",props:["book","size","muted"],data:function(){return{url:null}},created:function(){_.get(this.book,"asin")&&(this.url="https://smart.link/o3waqx4wg1gdn?asin="+this.book.asin)}},g=(0,c.Z)(h,(function(){var t=this,e=t.$createElement,o=t._self._c||e;return t.url||t.muted?o("a",{staticClass:"audible-app-link",class:{muted:t.muted,placeholder:!t.book.asin},attrs:{href:t.url,target:"_blank",rel:"noopener noreferrer",tabindex:t.muted?0:-1}},[o("div",{directives:[{name:"tippy",rawName:"v-tippy",value:{placement:t.muted?"left":"top",flipBehavior:t.muted?["left","top","bottom","right"]:["top","bottom","right","left"]},expression:"{ \n      placement: (muted ? 'left' : 'top'), \n      flipBehavior: (muted ? ['left', 'top', 'bottom', 'right'] : ['top', 'bottom', 'right', 'left']) \n    }"}],staticClass:"gr-icon",style:{width:(t.size||30)+"px",height:(t.size||30)+"px"},attrs:{content:"Open in app"}},[o("img",{attrs:{src:"data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCAxNTEuNSA5My43IiB3aWR0aD0iMTUxLjUiIGhlaWdodD0iOTMuNyI+PGRlZnM+PHN0eWxlPi5jbHMtMXtmaWxsOiNmZmY7fTwvc3R5bGU+PC9kZWZzPjxnPjxnPjxwYXRoIGNsYXNzPSJjbHMtMSIgZD0iTTc1LjggODAuN2w3NS43LTQ3LjJ2MTIuOEw3NS44IDkzLjcgMCA0Ni4zVjMzLjVsNzUuOCA0Ny4yeiIvPjxwYXRoIGNsYXNzPSJjbHMtMSIgZD0iTTc1LjggMjEuNWE0OC4xNyA0OC4xNyAwIDAgMC00MC43IDIxLjkgMTIuOTQgMTIuOTQgMCAwIDEgMS44LTEuNmMyMS4zLTE3LjcgNTItMTMuNyA2OC43IDguNmwxMS4xLTcuMWE0OS44MiA0OS44MiAwIDAgMC00MC45LTIxLjgiLz48cGF0aCBjbGFzcz0iY2xzLTEiIGQ9Ik03NS44IDQzLjRhMjcuNzIgMjcuNzIgMCAwIDAtMjIuNCAxMS41IDIyLjcgMjIuNyAwIDAgMSAxMy41LTQuNGM4LjIgMCAxNS41IDQuMiAyMC40IDExLjNsMTAuNi02LjZhMjUuNzkgMjUuNzkgMCAwIDAtMjIuMS0xMS44TTI0LjYgMjQuMkM1NS44LS40IDk5LjkgNi4zIDEyMy40IDM5bC4yLjIgMTEuNS03LjFhNzAuODIgNzAuODIgMCAwIDAtMTE4LjYgMCA2MC42MyA2MC42MyAwIDAgMSA4LjEtNy45Ii8+PC9nPjwvZz48L3N2Zz4=",alt:""}})])]):t._e()}),[],!1,null,"670147d2",null).exports,d={name:"goodReadsLink",props:["book","icon","size","muted"],mixins:[o(65).Z],data:function(){return{goodreadsUrl:null}},created:function(){this.book&&(this.goodreadsUrl=this.makeGoodReadsUrl())}},p=(0,c.Z)(d,(function(){var t=this,e=t.$createElement,o=t._self._c||e;return t.goodreadsUrl||t.muted?o("a",{staticClass:"good-reads-icon",class:{muted:t.muted,placeholder:!t.goodreadsUrl},attrs:{href:t.goodreadsUrl,target:"_blank",rel:"noopener noreferrer"}},[t.icon?o("div",{directives:[{name:"tippy",rawName:"v-tippy"}],staticClass:"gr-icon",style:{width:(t.size||30)+"px",height:(t.size||30)+"px"},attrs:{content:"Search for the book in Goodreads"}},[t.muted?o("img",{attrs:{alt:"",src:"data:image/svg+xml;base64,PHN2ZyBoZWlnaHQ9IjUxMiIgdmlld0JveD0iMCAwIDI0IDI0IiB3aWR0aD0iNTEyIiB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciPjxwYXRoIGQ9Ik01LjExMSAxOC45MDdoLjEyOWMuNTg1IDAgMS4xNzYgMCAxLjc2Mi4wMDUuMDc0IDAgLjE0My0uMDE5LjE2Ni4wOTguMzI4IDEuNjM2IDEuMzgzIDIuNTU5IDIuOSAyLjk5NSAxLjI0MS4zNTYgMi40OTUuMzY2IDMuNzQ5LjA4NCAxLjU1OC0uMzQ3IDIuNTgyLTEuMzI3IDMuMTM2LTIuODMxLjM2OS0xLjAwOC40OTQtMi4wNTMuNTA4LTMuMTE3LjAwNS0uMjcyLjAxNC0yLjIwMy0uMDA5LTIuNDc1bC0uMDQxLS4wMTRjLS4wMzcuMDctLjA3OS4xMzYtLjExNS4yMDYtMS4wMTkgMi4wMi0yLjgyNiAzLjE1OS00Ljg2MSAzLjIzOS00Ljc1LjE4OC03LjgxMi0yLjY3Mi03LjkzMi04LjI1OS0uMDIzLTEuMTExLjA4My0yLjE5OC4zODMtMy4yNjcuOTUtMy4zMzMgMy40NC01LjU0MSA3LjA5Ny01LjU2OSAyLjgyNi0uMDE5IDQuNjgxIDEuODE0IDUuMzU5IDMuMjk1LjAyMy4wNTIuMDYuMTA4LjExLjA4OVYuNDk4aDIuMDQzYzAgMTMuMTM5LjAwNSAxNS41NzIuMDA1IDE1LjU3Mi0uMDA1IDMuNjgtMS4yMzIgNi43MzYtNC43NSA3LjYwMy0zLjIwNS43OTItNy4zMzIuMjI1LTkuMDM5LTIuNjgxLS4zNjktLjYzMy0uNTQ0LTEuMzI3LS41OTktMi4wODZ6bTYuNzQ3LTE3LjE5NEM5LjQzNyAxLjY5IDYuODU0IDMuNjIxIDYuNTU0IDcuOTg1Yy0uMTg5IDIuNzY2LjY4MyA1LjcyOCAzLjI5OCA2Ljk2NiAxLjI3My42MDUgMy40MjcuNzAzIDQuOTk1LS40MDggMi4xOTUtMS41NTYgMi44OTEtNC41NDcgMi41MjctNy4yMTktLjQ0OC0zLjMzMy0yLjIwNS01LjYyNS01LjUxNi01LjYxMXoiIGZpbGw9IiNmZmYiLz48L3N2Zz4="}}):o("img",{attrs:{src:"data:image/svg+xml;base64,PHN2ZyBoZWlnaHQ9IjUxMiIgdmlld0JveD0iMCAwIDI0IDI0IiB3aWR0aD0iNTEyIiB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciPjxwYXRoIGQ9Ik01LjExMSAxOC45MDdoLjEyOWMuNTg1IDAgMS4xNzYgMCAxLjc2Mi4wMDUuMDc0IDAgLjE0My0uMDE5LjE2Ni4wOTguMzI4IDEuNjM2IDEuMzgzIDIuNTU5IDIuOSAyLjk5NSAxLjI0MS4zNTYgMi40OTUuMzY2IDMuNzQ5LjA4NCAxLjU1OC0uMzQ3IDIuNTgyLTEuMzI3IDMuMTM2LTIuODMxLjM2OS0xLjAwOC40OTQtMi4wNTMuNTA4LTMuMTE3LjAwNS0uMjcyLjAxNC0yLjIwMy0uMDA5LTIuNDc1bC0uMDQxLS4wMTRjLS4wMzcuMDctLjA3OS4xMzYtLjExNS4yMDYtMS4wMTkgMi4wMi0yLjgyNiAzLjE1OS00Ljg2MSAzLjIzOS00Ljc1LjE4OC03LjgxMi0yLjY3Mi03LjkzMi04LjI1OS0uMDIzLTEuMTExLjA4My0yLjE5OC4zODMtMy4yNjcuOTUtMy4zMzMgMy40NC01LjU0MSA3LjA5Ny01LjU2OSAyLjgyNi0uMDE5IDQuNjgxIDEuODE0IDUuMzU5IDMuMjk1LjAyMy4wNTIuMDYuMTA4LjExLjA4OVYuNDk4aDIuMDQzYzAgMTMuMTM5LjAwNSAxNS41NzIuMDA1IDE1LjU3Mi0uMDA1IDMuNjgtMS4yMzIgNi43MzYtNC43NSA3LjYwMy0zLjIwNS43OTItNy4zMzIuMjI1LTkuMDM5LTIuNjgxLS4zNjktLjYzMy0uNTQ0LTEuMzI3LS41OTktMi4wODZ6bTYuNzQ3LTE3LjE5NEM5LjQzNyAxLjY5IDYuODU0IDMuNjIxIDYuNTU0IDcuOTg1Yy0uMTg5IDIuNzY2LjY4MyA1LjcyOCAzLjI5OCA2Ljk2NiAxLjI3My42MDUgMy40MjcuNzAzIDQuOTk1LS40MDggMi4xOTUtMS41NTYgMi44OTEtNC41NDcgMi41MjctNy4yMTktLjQ0OC0zLjMzMy0yLjIwNS01LjYyNS01LjUxNi01LjYxMXoiIGZpbGw9IiM0ZTM0MmUiLz48L3N2Zz4=",alt:""}})]):o("span",[t._v("Search in Goodreads")])]):t._e()}),[],!1,null,"3eee499a",null).exports,m={name:"booksInSeriesLink",props:["series","book","index","seriesName"],mixins:[n.Z],data:function(){return{seriesPage:!1,routerLink:null,title:null,linkDisabled:!1}},created:function(){this.seriesPage="series"===this.$route.name,this.routerLink={name:"series",params:{series:this.series.asin},query:{subPageSource:"books"}},this.seriesName?this.routerLink.query.closeBookDetails=!0:this.routerLink.query.book=this.book.asin,this.linkDisabled=this.book.notInLibrary||this.seriesPage&&this.$route.params.series===this.series.asin},methods:{openBook:function(t){t.preventDefault(),this.book&&!this.book.notInLibrary&&this.book.asin!==this.$route.query.book&&this.$root.$emit("book-clicked",{book:this.book.obj})}}},k=(0,c.Z)(m,(function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("div",{staticClass:"linky"},[t.seriesName&&t.linkDisabled?o("span",{staticClass:"series-not-link"},[t._v(t._s(t.seriesName))]):!t.seriesName&&t.book.notInLibrary&&t.book.asin?o("a",{directives:[{name:"tippy",rawName:"v-tippy",value:{maxWidth:350,placement:"right",flipBehavior:["right","top","bottom"]},expression:"{ maxWidth: 350, placement: 'right', flipBehavior: ['right', 'top', 'bottom'] }"}],staticClass:"clickety-click cursor-alias",attrs:{target:"_blank",rel:"noopener noreferrer",href:t.makeUrl("book",t.book.asin),content:t.book.title!==t.book.titleShort&&t.book.title}},[o("span",{staticClass:"numbers"},[t._v(t._s(t.book.bookNumbers))]),t._v(" "),o("span",{staticClass:"title"},[t._v(t._s(t.book.titleShort||t.book.title))])]):o("router-link",{directives:[{name:"tippy",rawName:"v-tippy",value:{maxWidth:350,placement:"right",flipBehavior:["right","top","bottom"]},expression:"{ maxWidth: 350, placement: 'right', flipBehavior: ['right', 'top', 'bottom'] }"}],staticClass:"clickety-click",class:{"link-disabled":t.linkDisabled},attrs:{event:t.linkDisabled?"":"click",to:t.linkDisabled?"":t.routerLink,content:t.seriesName?null:(t.book.notInLibrary?"<strong>Not available:</strong> ":"")+(t.book.title!==t.book.titleShort?t.book.title:"")},nativeOn:{click:function(e){t.linkDisabled&&t.openBook(e)}}},[t.seriesName?o("span",{staticStyle:{"white-space":"normal","padding-bottom":"3px",display:"inline-block"}},[t._v("\n      "+t._s(t.seriesName)+"\n    ")]):t._e(),t._v(" "),t.seriesName?t._e():o("span",{staticClass:"numbers"},[t._v(t._s(t.book.bookNumbers))]),t._v(" "),t.seriesName?t._e():o("span",{staticClass:"title"},[t._v(t._s(t.book.titleShort||t.book.title))])])],1)}),[],!1,null,"51960c4c",null).exports,M={name:"booksInSeriesFilters",props:["series"],data:function(){return{showAllToggle:!1,showFinishedToggle:!1,count:{notInLibrary:0,finished:0}}},created:function(){this.series.collection&&(this.count.finished=this.countFinished(),this.showFinishedToggle=this.count.finished>0,this.count.notInLibrary=this.countNotInLibrary(),this.showAllToggle=this.count.notInLibrary>0)},methods:{countFinished:function(){var t=0;return _.each(this.series.collection,(function(e){if(e.books){var o=_.filter(e.books,(function(t){var e=_.get(t,"obj.progress");return!!e&&e.match(/finished/i)}));t+=o.length}})),t},countNotInLibrary:function(){var t=0;return _.each(this.series.collection,(function(e){if(e.books){var o=_.filter(e.books,"notInLibrary");t+=o.length}})),t}}},b=(0,c.Z)(M,(function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("div",{staticClass:"list-filter-wrapper"},[o("div",{staticClass:"row"},[t.showAllToggle?o("div",{staticClass:"show-all-toggle",on:{click:function(e){return t.$store.commit("stickyProp",{key:"booksInSeriesAll",value:!t.$store.state.sticky.booksInSeriesAll})}}},[o("div",[o("font-awesome",{class:{active:t.$store.state.sticky.booksInSeriesAll},staticStyle:{"padding-right":"4px"},attrs:{icon:["fas","ban"]}}),t._v(" "),t.showFinishedToggle?t._e():o("span",[t._v("Not in library:")]),t._v(" "),o("span",[t._v(t._s(t.count.notInLibrary))])],1)]):t._e(),t._v(" "),t.showFinishedToggle?o("div",{staticClass:"show-finished",on:{click:function(e){return t.$store.commit("stickyProp",{key:"booksInSeriesFinished",value:!t.$store.state.sticky.booksInSeriesFinished})}}},[o("div",[o("font-awesome",{class:{active:t.$store.state.sticky.booksInSeriesFinished},staticStyle:{"padding-right":"4px"},attrs:{icon:["fas","archive"]}}),t._v(" "),t.showAllToggle?t._e():o("span",[t._v("Finished books:")]),t._v(" "),o("span",[t._v(t._s(t.count.finished))])],1)]):t._e(),t._v(" "),o("div",{staticStyle:{flex:"unset","padding-left":"6px","padding-right":"6px","min-width":"30px"},on:{click:function(e){return t.$store.commit("stickyProp",{key:"booksInSeriesOpenInApp",value:!t.$store.state.sticky.booksInSeriesOpenInApp})}}},[t.$store.state.sticky.booksInSeriesOpenInApp?o("span",[o("img",{staticClass:"img-icon",attrs:{src:"data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCAxNTEuNSA5My43IiB3aWR0aD0iMTUxLjUiIGhlaWdodD0iOTMuNyI+PGRlZnM+PHN0eWxlPi5jbHMtMXtmaWxsOiNmZmY7fTwvc3R5bGU+PC9kZWZzPjxnPjxnPjxwYXRoIGNsYXNzPSJjbHMtMSIgZD0iTTc1LjggODAuN2w3NS43LTQ3LjJ2MTIuOEw3NS44IDkzLjcgMCA0Ni4zVjMzLjVsNzUuOCA0Ny4yeiIvPjxwYXRoIGNsYXNzPSJjbHMtMSIgZD0iTTc1LjggMjEuNWE0OC4xNyA0OC4xNyAwIDAgMC00MC43IDIxLjkgMTIuOTQgMTIuOTQgMCAwIDEgMS44LTEuNmMyMS4zLTE3LjcgNTItMTMuNyA2OC43IDguNmwxMS4xLTcuMWE0OS44MiA0OS44MiAwIDAgMC00MC45LTIxLjgiLz48cGF0aCBjbGFzcz0iY2xzLTEiIGQ9Ik03NS44IDQzLjRhMjcuNzIgMjcuNzIgMCAwIDAtMjIuNCAxMS41IDIyLjcgMjIuNyAwIDAgMSAxMy41LTQuNGM4LjIgMCAxNS41IDQuMiAyMC40IDExLjNsMTAuNi02LjZhMjUuNzkgMjUuNzkgMCAwIDAtMjIuMS0xMS44TTI0LjYgMjQuMkM1NS44LS40IDk5LjkgNi4zIDEyMy40IDM5bC4yLjIgMTEuNS03LjFhNzAuODIgNzAuODIgMCAwIDAtMTE4LjYgMCA2MC42MyA2MC42MyAwIDAgMSA4LjEtNy45Ii8+PC9nPjwvZz48L3N2Zz4=",alt:""}})]):o("span",[o("img",{staticClass:"img-icon",attrs:{src:"data:image/svg+xml;base64,PHN2ZyBoZWlnaHQ9IjUxMiIgdmlld0JveD0iMCAwIDI0IDI0IiB3aWR0aD0iNTEyIiB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciPjxwYXRoIGQ9Ik01LjExMSAxOC45MDdoLjEyOWMuNTg1IDAgMS4xNzYgMCAxLjc2Mi4wMDUuMDc0IDAgLjE0My0uMDE5LjE2Ni4wOTguMzI4IDEuNjM2IDEuMzgzIDIuNTU5IDIuOSAyLjk5NSAxLjI0MS4zNTYgMi40OTUuMzY2IDMuNzQ5LjA4NCAxLjU1OC0uMzQ3IDIuNTgyLTEuMzI3IDMuMTM2LTIuODMxLjM2OS0xLjAwOC40OTQtMi4wNTMuNTA4LTMuMTE3LjAwNS0uMjcyLjAxNC0yLjIwMy0uMDA5LTIuNDc1bC0uMDQxLS4wMTRjLS4wMzcuMDctLjA3OS4xMzYtLjExNS4yMDYtMS4wMTkgMi4wMi0yLjgyNiAzLjE1OS00Ljg2MSAzLjIzOS00Ljc1LjE4OC03LjgxMi0yLjY3Mi03LjkzMi04LjI1OS0uMDIzLTEuMTExLjA4My0yLjE5OC4zODMtMy4yNjcuOTUtMy4zMzMgMy40NC01LjU0MSA3LjA5Ny01LjU2OSAyLjgyNi0uMDE5IDQuNjgxIDEuODE0IDUuMzU5IDMuMjk1LjAyMy4wNTIuMDYuMTA4LjExLjA4OVYuNDk4aDIuMDQzYzAgMTMuMTM5LjAwNSAxNS41NzIuMDA1IDE1LjU3Mi0uMDA1IDMuNjgtMS4yMzIgNi43MzYtNC43NSA3LjYwMy0zLjIwNS43OTItNy4zMzIuMjI1LTkuMDM5LTIuNjgxLS4zNjktLjYzMy0uNTQ0LTEuMzI3LS41OTktMi4wODZ6bTYuNzQ3LTE3LjE5NEM5LjQzNyAxLjY5IDYuODU0IDMuNjIxIDYuNTU0IDcuOTg1Yy0uMTg5IDIuNzY2LjY4MyA1LjcyOCAzLjI5OCA2Ljk2NiAxLjI3My42MDUgMy40MjcuNzAzIDQuOTk1LS40MDggMi4xOTUtMS41NTYgMi44OTEtNC41NDcgMi41MjctNy4yMTktLjQ0OC0zLjMzMy0yLjIwNS01LjYyNS01LjUxNi01LjYxMXoiIGZpbGw9IiNmZmYiLz48L3N2Zz4="}})])])])])}),[],!1,null,"7ab11cfc",null).exports,y={name:"booksInSeries",props:["book"],mixins:[n.Z],components:{openInApp:g,goodReadsLink:p,booksInSeriesLink:k,filters:b},data:function(){return{inSeries:!1,series:{collection:null,toggle:!1}}},created:function(){this.seriesPage="series"===this.$route.name,this.series.collection=this.getBooksInSeries(),this.series.count=this.getSeriesCount();var t=this;_.each(this.series.collection,(function(e){if(e.books.length)return t.inSeries=!0,!1}))},mounted:function(){var t=this;this.$store.state.sticky.booksInSeriesToggle&&this.$nextTick((function(){t.$root.$emit("resizeSummary")}))},methods:{inLibraryLength:function(t){return _.filter(t.books,(function(t){return!t.notInLibrary})).length},checkFilter:function(t){if(t.notInLibrary)return this.$store.state.sticky.booksInSeriesAll;if(this.$store.state.sticky.booksInSeriesFinished)return!0;var e=_.get(t,"obj.progress");return!e||!e.match(/finished/i)},getBooksInSeries:function(){var t=this,e=[];return t.book.series&&_.each(t.book.series,(function(o,i){var s=_.find(t.$store.state.library.series,{asin:o.asin});if(s){var a=s.books;s.allBooks&&(a=s.allBooks),e.push({asin:o.asin,name:o.name,length:s.length,books:_.map(a,(function(e){var i=e.asin||e;if(_.includes(s.books,i)){var a=_.find(t.$store.state.library.books,{asin:i}),r=_.find(a.series,{asin:o.asin}),n=s.allBooks?e.bookNumbers:_.isArray(r.bookNumbers)?r.bookNumbers.join(","):r.bookNumbers;return{asin:e.asin||a.asin,bookNumbers:n,title:e.title||a.title,titleShort:e.titleShort||a.titleShort,obj:a}}return e.notInLibrary=!0,e.obj={},e}))})}})),e.length>0?e:null},getSeriesCount:function(){var t=[];return _.each(this.series.collection,(function(e,o){e.books.length&&_.each(e.books,(function(e){e.notInLibrary||(t[o]||t.push(0),++t[o])}))})),t.join(", ")},booksInSeriesLabelClick:function(){var t=this;this.$store.commit("stickyProp",{key:"booksInSeriesToggle",value:!this.$store.state.sticky.booksInSeriesToggle}),this.$nextTick((function(){t.$root.$emit("resizeSummary")}))},numbersClass:function(t){var e=_.get(t,"obj.progress");return{finished:!(!e||!e.toLowerCase().match("finished")),reading:!(!e||e.toLowerCase().match("finished")),unfinished:!e,current:this.book.asin===_.get(t,"obj.asin"),"not-in-library":t.notInLibrary}},iconTippyContent:function(t){if(t.free&&t.notInLibrary)return"This book is free...";if(t.plus&&t.notInLibrary)return"In the plus catalog...";if(t.notInLibrary)return"Not in library...";var e=this.numbersClass(t),o="";return e.finished?o="Finished!":e.unfinished?o="Not started...":e.reading&&(o="Started..."),o},booksInSeriesIcon:function(t){if(t.free&&t.notInLibrary)return"minus-circle";if(t.plus&&t.notInLibrary)return"plus-circle";if(t.notInLibrary)return"ban";var e=this.numbersClass(t),o="";return e.finished?o="archive":e.unfinished?o="book":e.reading&&(o="book-reader"),o}}},f=(0,c.Z)(y,(function(){var t=this,e=t.$createElement,o=t._self._c||e;return t.inSeries?o("div",[o("div",{staticClass:"label hidden-section-label my-books-in-series-label",on:{click:t.booksInSeriesLabelClick}},[o("span",{staticClass:"heading"},[t._v("My books in the series")]),t._v(" "),o("span",{staticClass:"count"},[t._v(t._s(t.series.count))]),t._v(" "),o("font-awesome",{attrs:{fas:"",icon:t.$store.state.sticky.booksInSeriesToggle?"chevron-up":"chevron-down"}})],1),t._v(" "),t.$store.state.sticky.booksInSeriesToggle?o("div",{staticClass:"hidden-section my-books-in-series"},[o("filters",{attrs:{series:t.series}}),t._v(" "),t._l(t.series.collection,(function(e,i){return o("div",{key:e.asin,staticClass:"series-section"},[o("div",{directives:[{name:"tippy",rawName:"v-tippy",value:{placement:"right",flipBehavior:["right","top","bottom"],maxWidth:300,allowHTML:!0},expression:"{ placement: 'right', flipBehavior: ['right', 'top', 'bottom'], maxWidth: 300, allowHTML: true }"}],staticClass:"series-heading",attrs:{content:"<div style='text-align: left;'>The first number is how many books you have in the series. The total is based on every single listing in the series page, including different versions or bundles with books you may already have.</div>"}},[o("div",{staticClass:"series-name"},[o("books-in-series-link",{attrs:{series:e,book:{},index:-1,seriesName:e.name}})],1),t._v(" "),o("div",{staticClass:"series-length"},[t._v("\n          "+t._s(t.inLibraryLength(e))+" / "+t._s(e.length)+"\n        ")])]),t._v(" "),t._l(e.books,(function(i,s){return t.checkFilter(i)?o("div",{key:i.asin,staticClass:"numbers-list-item",class:t.numbersClass(i),attrs:{"data-series-name":e.name}},[t.$store.state.sticky.booksInSeriesOpenInApp?o("open-in-app",{attrs:{size:14,book:i,muted:!0}}):o("good-reads-link",{attrs:{size:14,book:i,icon:!0,muted:!0}}),t._v(" "),o("span",{directives:[{name:"tippy",rawName:"v-tippy",value:{placement:"left",flipBehavior:["left","top","bottom"]},expression:"{ placement: 'left', flipBehavior: ['left', 'top', 'bottom'] }"}],staticClass:"icon",attrs:{content:t.iconTippyContent(i)}},[o("font-awesome",{attrs:{fas:"",icon:t.booksInSeriesIcon(i)}})],1),t._v(" "),o("books-in-series-link",{attrs:{series:e,book:i,index:s}})],1):t._e()}))],2)}))],2):t._e()]):t._e()}),[],!1,null,null,null).exports,v={name:"arrayToHTML",data:function(){return{inputDataExists:null}},props:["label","array","delim","noLabel","chevron"],mixins:[n.Z],created:function(){this.inputDataExists=this.checkIfArrayHasData()},computed:{identifierClass:function(){return"details-"+_.kebabCase(this.label)}},methods:{checkIfArrayHasData:function(){return this.array&&!_.isEmpty(this.array)}}},I=(0,c.Z)(v,(function(){var t=this,e=t.$createElement,o=t._self._c||e;return t.inputDataExists?o("div",{class:t.identifierClass},[t.noLabel?t._e():o("strong",{staticClass:"strong-label"},[t._v(t._s(t.label)+":")]),t._v(" "),t._l(t.array,(function(e,i){return o("span",{key:e.name+"("+i+")"},[o("span",[0!==i?o("span",[t.chevron?o("span",{staticClass:"chevron"},[o("font-awesome",{attrs:{fas:"",icon:"chevron-right"}})],1):o("span",[t._v(t._s(t.delim||", "))])]):t._e(),t._v(" "),o("a",{attrs:{href:t.makeUrl(t.label.toLowerCase(),e),target:"_blank",rel:"noopener noreferrer"}},[t._v(t._s(e.name))]),e.bookNumbers?o("span",{staticClass:"book-number"},[t._v("\n        (book\n        "),t._l(e.bookNumbers,(function(e,i){return o("span",[0!==i?o("span",[t._v(t._s(","))]):t._e(),o("span",[t._v(t._s(e))])])})),t._v(")")],2):t._e()])])}))],2):t._e()}),[],!1,null,"15f1a320",null).exports,L={name:"bookTags",props:["book"],mixins:[n.Z],data:function(){return{}}},N=(0,c.Z)(L,(function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("div",{staticClass:"book-tags"},t._l(t.book.tags,(function(e){return o("a",{key:e.name,staticClass:"book-tag",attrs:{href:t.makeUrl("tags",e),target:"_blank",rel:"noopener noreferrer"}},[t._v("\n    "+t._s(e.name)+"\n  ")])})),0)}),[],!1,null,"e6a33df2",null).exports,j={name:"bookSummary",props:["book","detailsEl","bookSummary"],mixins:[n.Z],components:{arrayToHTML:I,bookTags:N},data:function(){return{summary:{readmore:{toggle:!1,exists:!1},maxHeight:null,maxHeightTemp:null}}},computed:{summaryHTML:function(){return this.book.summary||this.bookSummary||this.book.blurb}},mounted:function(){this.$nextTick((function(){this.getSummaryMaxHeight()}))},created:function(){this.$root.$on("afterWindowResize",this.getSummaryMaxHeight),this.$root.$on("resizeSummary",this.getSummaryMaxHeight)},beforeDestroy:function(){this.$root.$off("afterWindowResize",this.getSummaryMaxHeight),this.$root.$off("resizeSummary",this.getSummaryMaxHeight)},methods:{getSummaryMaxHeight:function(){var t=this.$refs.summaryMetaTop.offsetHeight+260;if(window.innerWidth<=688)this.summaryHTML&&(this.summary.maxHeight=t+"px",this.summary.maxHeightTemp=this.summary.maxHeight);else{var e=this.detailsEl.querySelector(".information").offsetHeight;e<t&&(e=t);var o=this.$refs.summary.offsetHeight>e;this.summary.maxHeight=o?e+"px":null,this.summary.maxHeightTemp=e+"px"}},summaryReadMoreclick:function(){var t=this.$refs.readMoreBtn.getBoundingClientRect().top;this.summary.readmore.toggle=!this.summary.readmore.toggle,this.summary.maxHeight=this.summary.readmore.toggle?"none":this.summary.maxHeightTemp,this.summary.readmore.toggle||this.$nextTick((function(){scroll({top:this.$refs.readMoreBtn.getBoundingClientRect().top+window.pageYOffset-t})}))}}},w=(0,c.Z)(j,(function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("div",{ref:"summaryWrapper",staticClass:"book-summary-wrapper",class:{expanded:t.summary.readmore.toggle},style:{maxHeight:t.summary.maxHeight,paddingBottom:t.summary.readmore.toggle?"40px":"0px"}},[o("div",{ref:"summary",staticClass:"book-summary"},[o("div",{ref:"summaryMetaTop",staticClass:"summary-meta-top"},[o("h2",{staticClass:"book-title"},[o("a",{attrs:{href:t.makeUrl("book",t.book.asin),target:"_blank",rel:"noopener noreferrer"}},[t._v("\n          "+t._s(t.book.title)+"\n        ")])]),t._v(" "),t.book.categories?o("div",{staticClass:"categories",staticStyle:{"margin-top":"4px"}},[t.book.categories?o("arrayToHTML",{attrs:{label:"categories",noLabel:!0,array:t.book.categories,chevron:!0}}):t._e()],1):t._e(),t._v(" "),t.book.tags?o("book-tags",{attrs:{book:t.book}}):t._e(),t._v(" "),o("div",{staticClass:"inline-children smoll-text"},[t.book.releaseDate?o("div",{staticClass:"release-date",staticStyle:{"margin-right":"5px"}},[o("span",{staticClass:"strong-label"},[t._v("Released:")]),t._v(" "),o("span",[t._v(t._s(t.book.releaseDate))])]):t._e(),t._v(" "),o("div",[t.book.storePageChanged?o("div",{directives:[{name:"tippy",rawName:"v-tippy",value:{maxWidth:300},expression:"{ maxWidth: 300 }"}],staticClass:"info-tag store-page-changed",attrs:{content:"There is a store page for the book, but it's for a different version of the book. <br><br>This is the reason why some data is unavailable."}},[o("font-awesome",{attrs:{icon:["fas","shopping-bag"]}}),t._v("\n            changed\n          ")],1):t.book.storePageMissing?o("div",{directives:[{name:"tippy",rawName:"v-tippy",value:{maxWidth:300},expression:"{ maxWidth: 300 }"}],staticClass:"info-tag store-page-missing",attrs:{content:"Store page was possibly removed or it became unavailable in your region since it was added. In some cases there may still be a store page for a different version of the book. <br><br>This is the reason why some data is unavailable."}},[o("font-awesome",{attrs:{icon:["fas","shopping-bag"]}}),t._v("\n            missing\n          ")],1):t._e(),t._v(" "),t.book.fromPlusCatalog?o("div",{directives:[{name:"tippy",rawName:"v-tippy",value:{maxWidth:300},expression:"{ maxWidth: 300 }"}],staticClass:"info-tag plus-catalog",class:{"plus-catalog-unavailable":t.book.unavailable},attrs:{content:t.book.unavailable?"Used to be in the plus catalog but you no longer have access to it":"In the plus catalog"}},[o("font-awesome",{attrs:{fas:"",icon:["fas","plus-circle"]}}),t._v("\n            Plus catalog\n          ")],1):t._e(),t._v(" "),t.book.whispersync?o("div",{directives:[{name:"tippy",rawName:"v-tippy",value:{maxWidth:300},expression:"{ maxWidth: 300 }"}],staticClass:"info-tag whispersync",class:{owned:"owned"===t.book.whispersync},attrs:{content:"owned"===t.book.whispersync?"I own the Kindle version":"Kindle book available for purchase..."}},[o("font-awesome",{attrs:{icon:["fas","headphones-alt"]}}),t._v("\n            whispersync\n          ")],1):t._e()])])],1),t._v(" "),t.summaryHTML?o("div",{staticClass:"summary-inner-wrap",domProps:{innerHTML:t._s(t.summaryHTML)}}):t._e()]),t._v(" "),t.summary.maxHeight?o("div",{ref:"readMoreBtn",staticClass:"summary-read-more",on:{click:t.summaryReadMoreclick}},[o("span",[t._v(t._s(t.summary.readmore.toggle?"Read less":"Read more"))]),t._v(" "),o("font-awesome",{attrs:{fas:"",icon:t.summary.readmore.toggle?"chevron-up":"chevron-down"}})],1):t._e()])}),[],!1,null,"ac3e6156",null).exports;o(3512),o(2081),o(7471),o(2482);const x={name:"starRating",props:["size","rating","stars","ratings","number","numberOf","block","image","placeholderImage","placeholderOpacity","noPlaceholder"],data:function(){return{opt:null,config:{rating:null,length:null}}},created:function(){this.opt={rating:5,stars:5,size:15,number:!1,numberOf:!1,block:!1,image:!1,placeholderImage:!1,placeholderOpacity:!1,noPlaceholder:!1};var t=this.splitDecimals(this.rating);this.config.rating=this.toPercentage(t);var e=this.noPlaceholder||this.opt.noPlacehoder;this.config.length=e?this.config.rating.whole+(this.config.rating.fraction?1:0):parseInt(this.stars||this.opt.stars,10)},methods:{splitDecimals:function(t){var e,o=""+t;return o.indexOf(".")>-1?e=o.split("."):o.indexOf(",")>-1&&(e=o.split(",")),e?{whole:e[0],fraction:"."+e[1]}:{whole:t,fraction:null}},toPercentage:function(t){var e={whole:parseInt(t.whole,10)};return t.fraction&&(e.originalFraction=t.fraction),t.fraction&&(e.fraction=Math.floor(100*parseFloat(t.fraction,10))),e}}},T={name:"aleBookBasicInfo",props:["book","goodreads"],components:{goodReadsLink:p,arrayToHTML:I,starRating:(0,c.Z)(x,(function(){var t=this,e=t.$createElement,o=t._self._c||e;return t.config.rating?o("div",{staticClass:"sRatings-wrapper",class:{"sRatings-block":t.block||t.opt.block},attrs:{"data-rating":t.rating||0}},[t._l(t.config.length,(function(e,i){return o("div",{key:i,style:{width:t.config.rating.whole===e-1&&(t.noPlaceholder||t.opt.noPlaceholder)&&t.config.rating.fraction?(t.size||t.opt.size)*t.config.rating.originalFraction+"px":(t.size||t.opt.size)+"px",height:(t.size||t.opt.size)+"px"},attrs:{"data-star":e,"data-whole":t.config.rating.whole===e,"data-fraction":t.config.rating.fraction&&t.config.rating.whole===e-1}},[t.config.rating.whole<=e&&!t.noPlaceholder&&!t.opt.noPlaceholder?o("div",{staticClass:"sRatings-placeholder",class:{"sRatings-show":t.config.rating.whole<e},style:{left:t.config.rating.fraction&&t.config.rating.whole===e-1?t.config.rating.fraction+"%":"0%","background-size":(t.size||t.opt.size)+"px","background-image":!!(t.image||t.placeholderImage||t.opt.placeholderImage)&&"url("+(t.image&&!t.placeholderImage?t.image:t.placeholderImage||t.opt.placeholderImage)+")",opacity:t.placeholderOpacity||t.opt.placeholderOpacity}}):t._e(),t._v(" "),t.config.rating.whole>=e||t.config.rating.fraction&&t.config.rating.whole===e-1?o("div",{staticClass:"sRatings-star",style:{width:t.config.rating.whole>=e||t.config.rating.whole===e-1&&(t.noPlaceholder||t.opt.noPlaceholder)?"100%":t.config.rating.fraction+"%","background-size":(t.size||t.opt.size)+"px","background-image":!(!t.image&&!t.opt.image)&&"url("+(t.image||t.opt.image)+")"}}):t._e()])})),t._v(" "),t.number||t.opt.number?o("div",{staticClass:"text-label",style:{width:!(!t.numberOf&&!t.opt.numberOf)&&"auto",padding:!(!t.numberOf&&!t.opt.numberOf)&&"0 6px"}},[t._v(t._s(t.numberOf||t.opt.numberOf?t.rating+"/"+(t.stars||t.opt.stars):t.rating))]):t._e(),t._v(" "),t.ratings?o("div",{staticClass:"rating-count"},[t._v("("+t._s(t.ratings)+" ratings)")]):t._e()],2):t._e()}),[],!1,null,"7a0ef663",null).exports},methods:{myRatingLabel:function(t){switch(parseFloat(t)){case 1:return"Not for me";case 2:return"It’s okay";case 3:return"Pretty good";case 4:return"It’s great";case 5:return"I love it"}}}},S=(0,c.Z)(T,(function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("div",{staticClass:"basic-info"},[t.book.authors?o("arrayToHTML",{attrs:{label:"Author",array:t.book.authors}}):t._e(),t._v(" "),t.book.narrators?o("arrayToHTML",{attrs:{label:"Narrator",array:t.book.narrators}}):t._e(),t._v(" "),t.book.series?o("arrayToHTML",{attrs:{label:"Series",array:t.book.series}}):t._e(),t._v(" "),t.book.publishers?o("arrayToHTML",{attrs:{label:"Publisher",array:t.book.publishers}}):t._e(),t._v(" "),t.book.length?o("div",[o("strong",{staticClass:"strong-label"},[t._v("Length:")]),t._v("\n    "+t._s(t.book.length)+"\n  ")]):t._e(),t._v(" "),o("div",{staticClass:"line-it-up"},[t.book.language?o("div",{staticClass:"language"},[o("strong",{staticClass:"strong-label"},[t._v("Language:")]),t._v(" "),o("span",[t._v(t._s(t.book.language))])]):t._e(),t._v(" "),t.book.format?o("div",{staticClass:"format"},[o("strong",{staticClass:"strong-label"},[t._v("Format:")]),t._v(" "),o("span",[t._v(t._s(t.book.format))])]):t._e(),t._v(" "),t.book.rating?o("div",{staticClass:"rating"},[o("strong",{staticClass:"strong-label"},[t._v("Rating:")]),t._v(" "),o("star-rating",{attrs:{size:12,rating:t.book.rating,number:"true",ratings:t.book.ratings}})],1):t._e(),t._v(" "),t.book.myRating?o("div",{staticClass:"own-rating"},[o("strong",{directives:[{name:"tippy",rawName:"v-tippy",value:{placement:"top",flipBehavior:["top","right","left","bottom"],allowHTML:!0},expression:"{ placement: 'top', flipBehavior: ['top', 'right', 'left', 'bottom'], allowHTML: true }"}],staticClass:"strong-label",attrs:{content:"<ul><li>1 = Not for me</li><li>2 = It’s okay</li><li>3 = Pretty good</li><li>4 = It’s great</li><li>5 = I love it</li></ul>"}},[t._v("My rating: ")]),t._v(" "),o("star-rating",{directives:[{name:"tippy",rawName:"v-tippy",value:{placement:"right",flipBehavior:["right","top","bottom"]},expression:"{ placement: 'right', flipBehavior: ['right', 'top', 'bottom']  }"}],attrs:{size:12,content:t.myRatingLabel(t.book.myRating),rating:t.book.myRating,number:"true"}})],1):t._e()])],1)}),[],!1,null,"6d60d3b3",null).exports,D=(0,c.Z)({name:"favoriteBook",props:["topRight","size"]},(function(){var t=this,e=t.$createElement;return(t._self._c||e)("font-awesome",{directives:[{name:"tippy",rawName:"v-tippy"}],staticClass:"favorite",class:{"top-right":t.topRight},style:{width:(t.size||30)+"px",height:"auto"},attrs:{fas:"",icon:"heart",content:"This book is one of my favorites!"}})}),[],!1,null,"35612b41",null).exports;var C=o(2271);const z=(0,c.Z)({name:"openWebPlayer",props:["book","icon","topRight","size"],data:function(){return{url:null}},created:function(){this.book&&(this.url="https://www.audible.com/webplayer?asin="+this.book.asin)}},(function(){var t=this,e=t.$createElement,o=t._self._c||e;return t.url?o("a",{class:{"top-right":t.topRight},attrs:{href:t.url,target:"_blank",rel:"noopener noreferrer"}},[t.icon?o("div",{directives:[{name:"tippy",rawName:"v-tippy"}],staticClass:"gr-icon audible-app-link",style:{width:(t.size||30)+"px",height:(t.size||30)+"px"},attrs:{content:"Open web player"}},[o("img",{attrs:{src:"data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCAxNTEuNSA5My43IiB3aWR0aD0iMTUxLjUiIGhlaWdodD0iOTMuNyI+PGRlZnM+PHN0eWxlPi5jbHMtMXtmaWxsOiNmZmY7fTwvc3R5bGU+PC9kZWZzPjxnPjxnPjxwYXRoIGNsYXNzPSJjbHMtMSIgZD0iTTc1LjggODAuN2w3NS43LTQ3LjJ2MTIuOEw3NS44IDkzLjcgMCA0Ni4zVjMzLjVsNzUuOCA0Ny4yeiIvPjxwYXRoIGNsYXNzPSJjbHMtMSIgZD0iTTc1LjggMjEuNWE0OC4xNyA0OC4xNyAwIDAgMC00MC43IDIxLjkgMTIuOTQgMTIuOTQgMCAwIDEgMS44LTEuNmMyMS4zLTE3LjcgNTItMTMuNyA2OC43IDguNmwxMS4xLTcuMWE0OS44MiA0OS44MiAwIDAgMC00MC45LTIxLjgiLz48cGF0aCBjbGFzcz0iY2xzLTEiIGQ9Ik03NS44IDQzLjRhMjcuNzIgMjcuNzIgMCAwIDAtMjIuNCAxMS41IDIyLjcgMjIuNyAwIDAgMSAxMy41LTQuNGM4LjIgMCAxNS41IDQuMiAyMC40IDExLjNsMTAuNi02LjZhMjUuNzkgMjUuNzkgMCAwIDAtMjIuMS0xMS44TTI0LjYgMjQuMkM1NS44LS40IDk5LjkgNi4zIDEyMy40IDM5bC4yLjIgMTEuNS03LjFhNzAuODIgNzAuODIgMCAwIDAtMTE4LjYgMCA2MC42MyA2MC42MyAwIDAgMSA4LjEtNy45Ii8+PC9nPjwvZz48L3N2Zz4=",alt:""}})]):o("span",[t._v("Search in Goodreads")])]):t._e()}),[],!1,null,"0331aea0",null).exports,A={name:"book-info-toolbar",props:["book"],components:{goodReadsLink:p,favoriteBook:D,sampleButton:C.Z,openInApp:g,openWebPlayer:z},data:function(){return{size:20}}},O={name:"bookDetails",components:{bookBasicInfo:S,bookInfoToolbar:(0,c.Z)(A,(function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("div",{staticClass:"book-info-toolbar"},[t.book.favorite?o("favorite-book",{attrs:{size:t.size,book:t.book}}):t._e(),t._v(" "),o("sampleButton",{attrs:{size:t.size,book:t.book}}),t._v(" "),o("good-reads-link",{attrs:{size:t.size,book:t.book,icon:!0}}),t._v(" "),o("open-in-app",{attrs:{size:t.size,book:t.book}}),t._v(" "),o("open-web-player",{attrs:{size:t.size,book:t.book,icon:!0}})],1)}),[],!1,null,null,null).exports,carousel:u,booksInSeries:f,arrayToHTML:I,bookSummary:w,book:null,index:null},mixins:[i.Z,s.Z,a.Z,r.Z,n.Z],props:["booksWrapper"],data:function(){return{maxWidth:"unset",scrollTop:0,loading:!0,clickedBook:null,peopleAlsoBoughtJSON:null,bookSummaryJSON:null}},created:function(){this.book=this.$store.state.bookDetails.book,this.index=this.$store.state.bookDetails.index,this.loadJSON(),this.clickedBook=document.querySelector('.ale-book[data-asin="'+this.book.asin+'"]')||document.querySelector('.ale-row[data-asin="'+this.book.asin+'"]'),this.resetScroll(),this.scrollTop=window.pageYOffset,this.$root.$on("afterWindowResize",this.onWindowResize)},mounted:function(){this.maxWidth=this.repositionBookDetails()+"px",this.$updateQuery({query:"book",value:this.book.asin}),this.loading=!1},beforeDestroy:function(){this.$root.$off("afterWindowResize",this.onWindowResize),this.peopleAlsoBoughtJSON=null,this.bookSummaryJSON=null,this.$store.commit("prop",[{key:"bookDetails.book",value:null},{key:"bookDetails.index",value:-1}])},computed:{peopleAlsoBought:function(){return this.book.peopleAlsoBought||this.peopleAlsoBoughtJSON},getMaxWidth:function(){return"spreadsheet"===this.$store.state.sticky.viewMode||window.innerWidth>800?this.maxWidth:"800px"}},methods:{collapseBtnClicked:function(t){var e=this;this.$store.commit("stickyProp",{key:t,value:!this.$store.state.sticky[t]}),this.$nextTick((function(){e.$root.$emit("resizeSummary")}))},loadJSON:function(t){if(this.$store.state.standalone){var e=this,o=document.createElement("script");o.src="data/split-book-data/"+e.book.asin+"."+this.$store.state.library.extras.cacheID+".js",o.type="text/javascript",o.onload=function(){e.bookSummaryJSON=window.bookSummaryJSON,window.bookSummaryJSON=!0,e.peopleAlsoBoughtJSON=window.peopleAlsoBoughtJSON,window.peopleAlsoBoughtJSON=!0,o=null},o.onerror=function(){o=null,setTimeout((function(){t||e.loadJSON("afterError")}),1e3)},document.head.appendChild(o)}},onWindowResize:function(t){this.maxWidth=this.repositionBookDetails()+"px",t.widthChanged&&this.resetScroll()},changeUrl:function(){_.get(this.$route,"query.book")!==this.book.asin&&this.$router.replace({query:{book:this.book.asin}})},resetScroll:function(){this.$nextTick((function(){if("grid"===this.$store.state.sticky.viewMode){var t=document.querySelector("#nav-outer-wrapper.regular .inner-wrap"),e=t?t.offsetHeight:0;scroll({top:this.clickedBook.offsetTop-e-25})}else document.querySelector(".list-view-inner-wrap").scroll({top:this.clickedBook.offsetTop-45})}))},repositionBookDetails:function(){var t=document.querySelector(".ale-books"),e=t.querySelector(".ale-book")?t.querySelectorAll(".ale-book"):t.querySelector("table tbody").querySelectorAll(".ale-row"),o={};o.el=e[this.index],o.index=this.index,o.width=o.el.getBoundingClientRect().width,o.siblings=e;var i={};i.el=t,i.width=i.el.getBoundingClientRect().width;var s={};s.cols=Math.floor(i.width/o.width)||1,s.cols<2?s.rowEndEl=o.el:(s.currentRow=Math.floor(o.index/s.cols)+1,s.rowEnd=s.currentRow*s.cols,s.getRowEndEl=function(t){var e=o.siblings[t];return e||(e=s.getRowEndEl(--t)),e},s.rowEndEl=s.getRowEndEl(s.rowEnd-1));var a=document.querySelector(".target-row-end");return a&&a.classList.remove("target-row-end"),s.rowEndEl.classList.add("target-row-end"),s.rowEndEl.parentNode.insertBefore(this.$refs.bookDetails,s.rowEndEl.nextSibling),"spreadsheet"!==this.$store.state.sticky.viewMode&&this.repositionBookDetailsArrow(o.el),"spreadsheet"===this.$store.state.sticky.viewMode?i.width-60:o.width*s.cols},repositionBookDetailsArrow:function(t){var e=t.getBoundingClientRect().left+window.scrollX+t.offsetWidth/2;this.$refs.arrow.style.left=e+"px"},openAdjacentBookDetails:function(t){var e,o,i=this;if("grid"===this.$store.state.sticky.viewMode)switch(t.srcKey){case"left":case"tabShift":this.$root.$emit("book-clicked",{book:this.$store.state.chunkCollection[this.index-1]});break;case"right":case"tab":e=this.index+1,o=this.$store.state.chunkCollection[e],e>i.$store.state.chunkCollection.length-1?(this.$store.commit("chunkCollectionAdd"),this.$nextTick((function(){o=this.$store.state.chunkCollection[e],this.$root.$emit("book-clicked",{book:o})}))):this.$root.$emit("book-clicked",{book:o});break;case"up":case"down":var s={};s.el=document.querySelector(".ale-books"),s.width=s.el.offsetWidth;var a={};a.el=this.clickedBook,a.index=this.index,a.width=a.el.offsetWidth;var r=Math.floor(s.width/a.width),n=function t(e){var o=i.$store.state.chunkCollection[e];return o||(o=t(--e)),o};this.$store.commit("prop",[{key:"bookDetails.book",value:null},{key:"bookDetails.index",value:-1}]),void 0!==_.get(this.$route,"query.book")&&this.$updateQuery({query:"book",value:null}),e="up"===t.srcKey?this.index-r:this.index+r,o="up"===t.srcKey?i.$store.state.chunkCollection[e]:n(e),e>i.$store.state.chunkCollection.length-1?(this.$store.commit("chunkCollectionAdd"),this.$nextTick((function(){o="up"===t.srcKey?i.$store.state.chunkCollection[e]:n(e),this.$root.$emit("book-clicked",{book:o})}))):this.$root.$emit("book-clicked",{book:o})}else switch(t.srcKey){case"left":case"up":case"tabShift":this.$root.$emit("book-clicked",{book:this.$store.getters.collection[this.index-1]});break;case"right":case"down":case"tab":e=this.index+1,o=this.$store.state.chunkCollection[e],e>i.$store.state.chunkCollection.length-1?(this.$store.commit("chunkCollectionAdd"),this.$nextTick((function(){o=this.$store.state.chunkCollection[e],this.$root.$emit("book-clicked",{book:o})}))):this.$root.$emit("book-clicked",{book:o})}},closeBookDetails:function(){this.$store.commit("prop",[{key:"bookDetails.book",value:null},{key:"bookDetails.index",value:-1}]),void 0!==_.get(this.$route,"query.book")&&this.$updateQuery({query:"book",value:null})},progressTooltip:function(t){if("finished"===t.progress.toLowerCase().trim()){var e=this.timeStringToSeconds(t.length);return"Finished: ( "+this.secondsToTimeString(e)+" )"}var o=this.timeStringToSeconds(t.progress),i=this.timeStringToSeconds(t.length),s=i-o;return"Progress: "+this.secondsToTimeString(s)+" / "+this.secondsToTimeString(i)},progressInfo:function(t){if(t.progress&&t.length){if("finished"===t.progress.toLowerCase().trim()){var e=this.timeStringToSeconds(t.length);return'<div class="stretch-center" style="flex: 1;"><strong>Finished!</strong> ( '+this.secondsToTimeString(e,!0)+" )</div>"}var o=this.timeStringToSeconds(t.progress),i=this.timeStringToSeconds(t.length),s=i-o;return"<strong>Progress: </strong><div>"+this.secondsToTimeString(s,!0)+" / "+this.secondsToTimeString(i,!0)+"</div>"}return'<div class="stretch-center" style="flex: 1;"><strong>Length:</strong> '+(t.length||"unkown")+"</div>"}}},E=(0,c.Z)(O,(function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("div",{directives:[{name:"shortkey",rawName:"v-shortkey.once",value:["esc"],expression:"['esc']",modifiers:{once:!0}}],ref:"bookDetails",class:{"spreadsheet-details":"spreadsheet"===t.$store.state.sticky.viewMode},attrs:{id:"ale-bookdetails"},on:{shortkey:t.closeBookDetails}},["spreadsheet"!==t.$store.state.sticky.viewMode?o("div",{ref:"arrow",staticClass:"arrow"}):t._e(),t._v(" "),o("div",{directives:[{name:"shortkey",rawName:"v-shortkey.once",value:{left:["arrowleft"],up:["arrowup"],right:["arrowright"],down:["arrowdown"],tab:["tab"],tabShift:["tab","shift"]},expression:"{ left: ['arrowleft'], up: ['arrowup'], right: ['arrowright'], down: ['arrowdown'], tab: ['tab'], tabShift: ['tab', 'shift'] }",modifiers:{once:!0}}],attrs:{id:"book-info-container"},on:{shortkey:t.openAdjacentBookDetails}},[o("div",{staticClass:"inner-wrap",style:{maxWidth:t.getMaxWidth}},[o("font-awesome",{directives:[{name:"tippy",rawName:"v-tippy",value:{placement:"left",flipBehavior:["left","right"],allowHTML:!0},expression:"{ placement: 'left', flipBehavior: ['left', 'right'], allowHTML: true }"}],staticClass:"book-details-info",attrs:{icon:["fas","info-circle"],content:"<div style='text-align: left;'><h3 style='margin: 0; padding-top: 10px; padding-left: 15px;'>Shortcuts</h3><ul><li><strong>Close:</strong> Esc</li><li><strong>Move to adjacent book:</strong> arrow keys</li></ul></div>"}}),t._v(" "),o("div",{staticClass:"top"},[o("div",{ref:"information",staticClass:"information"},[t.$store.state.windowWidth>688?o("div",{directives:[{name:"tippy",rawName:"v-tippy"}],staticClass:"collapse-btn",style:{top:"5px"},attrs:{content:(t.$store.state.sticky.bookDetailsCollapsedCover?"Expand":"Collapse")+" cover image."},on:{click:function(e){return t.collapseBtnClicked("bookDetailsCollapsedCover")}}},[o("font-awesome",{attrs:{fas:"",icon:t.$store.state.sticky.bookDetailsCollapsedCover?"chevron-down":"chevron-up"}})],1):t._e(),t._v(" "),o("div",{staticClass:"cover-wrap"},[o("a",{attrs:{href:t.makeUrl("book",t.book.asin),target:"_blank",rel:"noopener noreferrer"}},[o("div",{staticClass:"progressbar"},[o("div",{staticClass:"progress",style:t.progressbarWidth(t.book)})]),t._v(" "),!t.$store.state.sticky.bookDetailsCollapsedCover&&t.book.cover&&t.$store.state.windowWidth>688?o("img",{staticClass:"cover",attrs:{crossorigin:"anonymous",src:t.makeCoverUrl(t.book.cover)}}):t._e()])]),t._v(" "),o("div",{staticClass:"progress-info",domProps:{innerHTML:t._s(t.progressInfo(t.book))}}),t._v(" "),o("div",{staticClass:"basic-details"},[o("div",{directives:[{name:"tippy",rawName:"v-tippy"}],staticClass:"collapse-btn",style:{top:t.$store.state.sticky.bookDetailsCollapsedDetails?"-10px":"25px"},attrs:{content:(t.$store.state.sticky.bookDetailsCollapsedDetails?"Expand":"Collapse")+" book details."},on:{click:function(e){return t.collapseBtnClicked("bookDetailsCollapsedDetails")}}},[o("font-awesome",{attrs:{fas:"",icon:t.$store.state.sticky.bookDetailsCollapsedDetails?"chevron-down":"chevron-up"}})],1),t._v(" "),o("book-info-toolbar",{attrs:{book:t.book}}),t._v(" "),t.$store.state.sticky.bookDetailsCollapsedDetails?t._e():o("book-basic-info",{attrs:{book:t.book}})],1),t._v(" "),o("books-in-series",{attrs:{book:t.book}})],1),t._v(" "),t.$el?o("book-summary",{attrs:{detailsEl:t.$el,book:t.book,bookSummary:t.bookSummaryJSON}}):t._e()],1),t._v(" "),t.loading||!t.peopleAlsoBought||!0===t.peopleAlsoBought||t.$store.state.standalone&&!t.$store.state.siteOnline?t._e():o("carousel",{key:t.maxWidth,attrs:{books:t.peopleAlsoBought}},[t._v("\n        Listeners also enjoyed\n      ")])],1)])])}),[],!1,null,"3aab826c",null).exports},2271:(t,e,o)=>{"use strict";o.d(e,{Z:()=>i});const i=(0,o(810).Z)({name:"sampleButton",props:["book","index","topRight","size"],methods:{playSample:function(t,e){this.$root.$emit("play-audio",{from:"sampleButton",route:this.$route,book:t,index:e})}}},(function(){var t=this,e=t.$createElement;return(t._self._c||e)("font-awesome",{directives:[{name:"tippy",rawName:"v-tippy"}],staticClass:"pointer",class:{"top-right":t.topRight},style:{width:(t.size||30)+"px",height:"auto"},attrs:{fas:"",icon:"play-circle",content:"Play sample audio"},on:{click:function(e){return t.playSample(t.book,t.rowIndex)}}})}),[],!1,null,"05b60316",null).exports}}]);